{"version":3,"file":"index.js","sources":["../../../src/mesh/index.ts"],"sourcesContent":["export function toIndexbuffer(srcArr: Float32Array, dstArr: number[], dstIdxArr: number[], stride: number) {\r\n    for (let i = 0, l = srcArr.length; i < l; i += stride) {\r\n        let idx = indexOf(srcArr, i, dstArr, 4);\r\n        if (idx === -1) {\r\n            idx = dstArr.length;\r\n            for (let q = 0; q < stride; q++) {\r\n                dstArr.push(srcArr[i + q]);\r\n            }\r\n        }\r\n        idx >>= 2;\r\n        dstIdxArr.push(idx);\r\n    }\r\n}\r\nexport function indexOf(\r\n    srcArr: Float32Array, srcIdx: number, dstArr: number[], stride: number\r\n) {\r\n    for (let i = 0, j = 0, l = dstArr.length; i < l; i += stride, j++) {\r\n        let same = true;\r\n        for (let q = 0; q < stride; q++) {\r\n            same &&= srcArr[srcIdx + q] === dstArr[i + q];\r\n        }\r\n        if (same) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\n\r\nexport function toNonIndex(srcArr: Float32Array, idxArr: Uint32Array, dstArr: Float32Array, stride: number) {\r\n    let ptr = 0;\r\n    for (let i = 0, l = idxArr.length; i < l; i++) {\r\n        let idx = idxArr[i] * stride;\r\n        for (let q = 0; q < stride; q++) {\r\n            dstArr[ptr++] = srcArr[idx + q];\r\n        }\r\n    }\r\n}"],"names":[],"mappings":"AAAM,SAAU,aAAa,CAAC,MAAoB,EAAE,MAAgB,EAAE,SAAmB,EAAE,MAAc,EAAA;AACrG,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,MAAM,EAAE;AACnD,QAAA,IAAI,GAAG,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC;AACvC,QAAA,IAAI,GAAG,KAAK,EAAE,EAAE;AACZ,YAAA,GAAG,GAAG,MAAM,CAAC,MAAM;AACnB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC7B,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YAC9B;QACJ;QACA,GAAG,KAAK,CAAC;AACT,QAAA,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC;IACvB;AACJ;AACM,SAAU,OAAO,CACnB,MAAoB,EAAE,MAAc,EAAE,MAAgB,EAAE,MAAc,EAAA;IAEtE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,MAAM,EAAE,CAAC,EAAE,EAAE;QAC/D,IAAI,IAAI,GAAG,IAAI;AACf,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;AAC7B,YAAA,IAAI,KAAK,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;QACjD;QACA,IAAI,IAAI,EAAE;AACN,YAAA,OAAO,CAAC;QACZ;IACJ;IACA,OAAO,EAAE;AACb;AAEM,SAAU,UAAU,CAAC,MAAoB,EAAE,MAAmB,EAAE,MAAoB,EAAE,MAAc,EAAA;IACtG,IAAI,GAAG,GAAG,CAAC;AACX,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;QAC3C,IAAI,GAAG,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM;AAC5B,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;YAC7B,MAAM,CAAC,GAAG,EAAE,CAAC,GAAG,MAAM,CAAC,GAAG,GAAG,CAAC,CAAC;QACnC;IACJ;AACJ;;;;"}