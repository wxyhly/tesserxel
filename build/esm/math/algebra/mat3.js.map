{"version":3,"file":"mat3.js","sources":["../../../../src/math/algebra/mat3.ts"],"sourcesContent":["import { Pool } from \"../pool\";\r\nimport { Quaternion } from \"./quaternion\";\r\nimport { Vec3 } from \"./vec3\";\r\n\r\nexport class Mat3Pool extends Pool<Mat3>{\r\n    constructObject() { return new Mat3; }\r\n}\r\nexport const mat3Pool = new Mat3Pool;\r\nexport class Mat3 {\r\n    elem: number[];\r\n    static id = new Mat3(1, 0, 0, 0, 1, 0, 0, 0, 1);\r\n    static zero = new Mat3(0, 0, 0, 0, 0, 0, 0, 0, 0);\r\n    static diag(a: number, b: number, c: number): Mat3 {\r\n        return new Mat3(\r\n            a, 0, 0,\r\n            0, b, 0,\r\n            0, 0, c\r\n        );\r\n    }\r\n    constructor(\r\n        a: number = 1, b: number = 0, c: number = 0,\r\n        d: number = 0, e: number = 1, f: number = 0,\r\n        g: number = 0, h: number = 0, i: number = 1\r\n    ) { this.elem = [a, b, c, d, e, f, g, h, i]; }\r\n    set(\r\n        a: number = 0, b: number = 0, c: number = 0,\r\n        d: number = 0, e: number = 0, f: number = 0,\r\n        g: number = 0, h: number = 0, i: number = 0\r\n    ): Mat3 { this.elem = [a, b, c, d, e, f, g, h, i]; return this; }\r\n    setid(): Mat3 { this.elem = [1, 0, 0, 0, 1, 0, 0, 0, 1]; return this; }\r\n\r\n    ts(): Mat3 {\r\n        let me = this.elem;\r\n        let tmp = me[1]; me[1] = me[3]; me[3] = tmp;\r\n        tmp = me[2]; me[2] = me[6]; me[6] = tmp;\r\n        tmp = me[5]; me[5] = me[7]; me[7] = tmp;\r\n        return this;\r\n    }\r\n    t(): Mat3 {\r\n        return new Mat3(\r\n            this.elem[0], this.elem[3], this.elem[6],\r\n            this.elem[1], this.elem[4], this.elem[7],\r\n            this.elem[2], this.elem[5], this.elem[8]\r\n        );\r\n    }\r\n\r\n    /** col vector */x_(): Vec3 { return new Vec3(this.elem[0], this.elem[3], this.elem[6]); }\r\n    /** col vector */y_(): Vec3 { return new Vec3(this.elem[1], this.elem[4], this.elem[7]); }\r\n    /** col vector */z_(): Vec3 { return new Vec3(this.elem[2], this.elem[5], this.elem[8]); }\r\n\r\n    /** row vector */_x(): Vec3 { return new Vec3(this.elem[0], this.elem[1], this.elem[2]); }\r\n    /** row vector */_y(): Vec3 { return new Vec3(this.elem[3], this.elem[4], this.elem[5]); }\r\n    /** row vector */_z(): Vec3 { return new Vec3(this.elem[6], this.elem[7], this.elem[8]); }\r\n    copy(m2: Mat3): Mat3 {\r\n        for (var i = 0; i < 4; i++) {\r\n            this.elem[i] = m2.elem[i];\r\n        }\r\n        return this;\r\n    }\r\n    add(m2: Mat3): Mat3 {\r\n        let m = new Mat3();\r\n        for (var i = 0; i < 9; i++) {\r\n            m.elem[i] = this.elem[i] + m2.elem[i];\r\n        }\r\n        return m;\r\n    }\r\n    adds(m2: Mat3): Mat3 {\r\n        for (var i = 0; i < 9; i++) {\r\n            this.elem[i] += m2.elem[i];\r\n        }\r\n        return this;\r\n    }\r\n    neg(): Mat3 {\r\n        let m = new Mat3();\r\n        for (var i = 0; i < 9; i++) {\r\n            m.elem[i] = -this.elem[i];\r\n        }\r\n        return m;\r\n    }\r\n    negs(): Mat3 {\r\n        for (var i = 0; i < 9; i++) {\r\n            this.elem[i] = -this.elem[i];\r\n        }\r\n        return this;\r\n    }\r\n    sub(m2: Mat3): Mat3 {\r\n        let m = new Mat3();\r\n        for (var i = 0; i < 9; i++) {\r\n            m.elem[i] = this.elem[i] - m2.elem[i];\r\n        }\r\n        return m;\r\n    }\r\n    subs(m2: Mat3): Mat3 {\r\n        for (var i = 0; i < 9; i++) {\r\n            this.elem[i] -= m2.elem[i];\r\n        }\r\n        return this;\r\n    }\r\n    mulf(k: number): Mat3 {\r\n        let m = new Mat3();\r\n        for (var i = 0; i < 9; i++) {\r\n            m.elem[i] = this.elem[i] * k;\r\n        }\r\n        return m;\r\n    }\r\n    mulfs(k: number): Mat3 {\r\n        for (var i = 0; i < 9; i++) {\r\n            this.elem[i] *= k;\r\n        }\r\n        return this;\r\n    }\r\n    mulv(v: Vec3): Vec3 {\r\n        let a = this.elem;\r\n        return new Vec3(\r\n            v.x * a[0] + v.y * a[1] + v.z * a[2],\r\n            v.x * a[3] + v.y * a[4] + v.z * a[5],\r\n            v.x * a[6] + v.y * a[7] + v.z * a[8]\r\n        );\r\n    }\r\n    mul(m: Mat3): Mat3 {\r\n        let a = this.elem; let b = m.elem;\r\n        return new Mat3(\r\n            a[0] * b[0] + a[1] * b[3] + a[2] * b[6], a[0] * b[1] + a[1] * b[4] + a[2] * b[7], a[0] * b[2] + a[1] * b[5] + a[2] * b[8],\r\n            a[3] * b[0] + a[4] * b[3] + a[5] * b[6], a[3] * b[1] + a[4] * b[4] + a[5] * b[7], a[3] * b[2] + a[4] * b[5] + a[5] * b[8],\r\n            a[6] * b[0] + a[7] * b[3] + a[8] * b[6], a[6] * b[1] + a[7] * b[4] + a[8] * b[7], a[6] * b[2] + a[7] * b[5] + a[8] * b[8],\r\n        );\r\n    }\r\n    muls(m: Mat3): Mat3 {\r\n        let a = this.elem; let b = m.elem;\r\n        this.set(\r\n            a[0] * b[0] + a[1] * b[3] + a[2] * b[6], a[0] * b[1] + a[1] * b[4] + a[2] * b[7], a[0] * b[2] + a[1] * b[5] + a[2] * b[8],\r\n            a[3] * b[0] + a[4] * b[3] + a[5] * b[6], a[3] * b[1] + a[4] * b[4] + a[5] * b[7], a[3] * b[2] + a[4] * b[5] + a[5] * b[8],\r\n            a[6] * b[0] + a[7] * b[3] + a[8] * b[6], a[6] * b[1] + a[7] * b[4] + a[8] * b[7], a[6] * b[2] + a[7] * b[5] + a[8] * b[8],\r\n        );\r\n        return this;\r\n    }\r\n    inv(): Mat3 {\r\n        let me = this.elem;\r\n        let n11 = me[0], n21 = me[1], n31 = me[2],\r\n            n12 = me[3], n22 = me[4], n32 = me[5],\r\n            n13 = me[6], n23 = me[7], n33 = me[8],\r\n            t11 = n33 * n22 - n32 * n23,\r\n            t12 = n32 * n13 - n33 * n12,\r\n            t13 = n23 * n12 - n22 * n13,\r\n            det = n11 * t11 + n21 * t12 + n31 * t13;\r\n        if (det === 0) {\r\n            console.warn(\"Matrix determinant is 0\");\r\n            return new Mat3(0, 0, 0, 0, 0, 0, 0, 0, 0);\r\n        }\r\n        let detInv = 1 / det;\r\n        return new Mat3(\r\n            t11 * detInv,\r\n            (n31 * n23 - n33 * n21) * detInv,\r\n            (n32 * n21 - n31 * n22) * detInv,\r\n            t12 * detInv,\r\n            (n33 * n11 - n31 * n13) * detInv,\r\n            (n31 * n12 - n32 * n11) * detInv,\r\n            t13 * detInv,\r\n            (n21 * n13 - n23 * n11) * detInv,\r\n            (n22 * n11 - n21 * n12) * detInv\r\n        );\r\n    }\r\n    invs(): Mat3 {\r\n        let me = this.elem;\r\n        let n11 = me[0], n21 = me[1], n31 = me[2],\r\n            n12 = me[3], n22 = me[4], n32 = me[5],\r\n            n13 = me[6], n23 = me[7], n33 = me[8],\r\n            t11 = n33 * n22 - n32 * n23,\r\n            t12 = n32 * n13 - n33 * n12,\r\n            t13 = n23 * n12 - n22 * n13,\r\n            det = n11 * t11 + n21 * t12 + n31 * t13;\r\n        if (det === 0) {\r\n            var msg = \"Matrix determinant is 0\";\r\n            console.warn(msg);\r\n            me.fill(0);\r\n            return this;\r\n        }\r\n        let detInv = 1 / det;\r\n        me[0] = t11 * detInv;\r\n        me[1] = (n31 * n23 - n33 * n21) * detInv;\r\n        me[2] = (n32 * n21 - n31 * n22) * detInv;\r\n        me[3] = t12 * detInv;\r\n        me[4] = (n33 * n11 - n31 * n13) * detInv;\r\n        me[5] = (n31 * n12 - n32 * n11) * detInv;\r\n        me[6] = t13 * detInv;\r\n        me[7] = (n21 * n13 - n23 * n11) * detInv;\r\n        me[8] = (n22 * n11 - n21 * n12) * detInv;\r\n        return this;\r\n    }\r\n\r\n    setFromRotaion(q: Quaternion): Mat3 {\r\n        let xt2 = q.y + q.y, yt2 = q.z + q.z, zt2 = q.w + q.w;\r\n        let x2 = q.y * xt2;\r\n        let y2 = q.z * yt2;\r\n        let z2 = q.w * zt2;\r\n\r\n        let xy = q.y * yt2;\r\n        let yz = q.w * yt2;\r\n        let xz = q.w * xt2;\r\n\r\n        let wx = q.x * xt2;\r\n        let wy = q.x * yt2;\r\n        let wz = q.x * zt2;\r\n        return this.set(\r\n            1 - (y2 + z2), xy - wz, xz + wy,\r\n            xy + wz, 1 - x2 - z2, yz - wx,\r\n            xz - wy, yz + wx, 1 - x2 - y2\r\n        );\r\n    }\r\n    pushPool(pool: Mat3Pool = mat3Pool) {\r\n        pool.push(this);\r\n    }\r\n}\r\nexport let _mat3 = new Mat3();"],"names":[],"mappings":"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"}