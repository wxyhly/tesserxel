{"version":3,"file":"mat2.js","sources":["../../../../src/math/algebra/mat2.ts"],"sourcesContent":["import { Pool } from \"../pool.js\";\r\nimport { Vec2 } from \"./vec2.js\";\r\n\r\nexport class Mat2Pool extends Pool<Mat2>{\r\n    constructObject() { return new Mat2; }\r\n}\r\nexport const mat2Pool = new Mat2Pool;\r\nexport class Mat2 {\r\n    elem: number[];\r\n    static id = new Mat2(1, 0, 0, 1);\r\n    static zero = new Mat2(0, 0, 0, 0);\r\n    static diag(a: number, b: number): Mat2 {\r\n        return new Mat2(\r\n            a, 0,\r\n            0, b\r\n        );\r\n    }\r\n    constructor(\r\n        a: number = 1, b: number = 0,\r\n        c: number = 0, d: number = 1\r\n    ) { this.elem = [a, b, c, d]; }\r\n    set(\r\n        a: number = 0, b: number = 0,\r\n        c: number = 0, d: number = 0\r\n    ): Mat2 { this.elem[0] = a; this.elem[1] = b; this.elem[2] = c; this.elem[3] = d; return this; }\r\n    setid() { this.elem[0] = 1; this.elem[1] = 0; this.elem[2] = 0; this.elem[3] = 1; return this; }\r\n    ts(): Mat2 {\r\n        let tmp = this.elem[1]; this.elem[1] = this.elem[2]; this.elem[2] = tmp;\r\n        return this;\r\n    }\r\n    t(): Mat2 {\r\n        return new Mat2(\r\n            this.elem[0], this.elem[2],\r\n            this.elem[1], this.elem[3]\r\n        );\r\n    }\r\n    copy(m2: Mat2): Mat2 {\r\n        for (var i = 0; i < 4; i++) {\r\n            this.elem[i] = m2.elem[i];\r\n        }\r\n        return this;\r\n    }\r\n    add(m2: Mat2): Mat2 {\r\n        let m = new Mat2();\r\n        for (var i = 0; i < 4; i++) {\r\n            m.elem[i] = this.elem[i] + m2.elem[i];\r\n        }\r\n        return m;\r\n    }\r\n    adds(m2: Mat2): Mat2 {\r\n        for (var i = 0; i < 4; i++) {\r\n            this.elem[i] += m2.elem[i];\r\n        }\r\n        return this;\r\n    }\r\n    neg(): Mat2 {\r\n        let m = new Mat2();\r\n        for (var i = 0; i < 4; i++) {\r\n            m.elem[i] = -this.elem[i];\r\n        }\r\n        return m;\r\n    }\r\n    negs(): Mat2 {\r\n        for (var i = 0; i < 4; i++) {\r\n            this.elem[i] = -this.elem[i];\r\n        }\r\n        return this;\r\n    }\r\n    sub(m2: Mat2): Mat2 {\r\n        let m = new Mat2();\r\n        for (var i = 0; i < 4; i++) {\r\n            m.elem[i] = this.elem[i] - m2.elem[i];\r\n        }\r\n        return m;\r\n    }\r\n    subs(m2: Mat2): Mat2 {\r\n        for (var i = 0; i < 4; i++) {\r\n            this.elem[i] -= m2.elem[i];\r\n        }\r\n        return this;\r\n    }\r\n    mulf(k: number): Mat2 {\r\n        let m = new Mat2();\r\n        for (var i = 0; i < 4; i++) {\r\n            m.elem[i] = this.elem[i] * k;\r\n        }\r\n        return m;\r\n    }\r\n    mulfs(k: number): Mat2 {\r\n        for (var i = 0; i < 4; i++) {\r\n            this.elem[i] *= k;\r\n        }\r\n        return this;\r\n    }\r\n    mulv(v: Vec2): Vec2 {\r\n        let a = this.elem;\r\n        return new Vec2(\r\n            v.x * a[0] + v.y * a[1],\r\n            v.x * a[2] + v.y * a[3]\r\n        );\r\n    }\r\n    mul(m: Mat2): Mat2 {\r\n        let a = this.elem; let b = m.elem;\r\n        return new Mat2(\r\n            a[0] * b[0] + a[1] * b[2], a[0] * b[1] + a[1] * b[3],\r\n            a[2] * b[0] + a[3] * b[2], a[2] * b[1] + a[3] * b[3]\r\n        );\r\n    }\r\n    muls(m: Mat2): Mat2 {\r\n        let a = this.elem; let b = m.elem;\r\n        this.set(\r\n            a[0] * b[0] + a[1] * b[2], a[0] * b[1] + a[1] * b[3],\r\n            a[2] * b[0] + a[3] * b[2], a[2] * b[1] + a[3] * b[3]\r\n        );\r\n        return this;\r\n    }\r\n    inv(): Mat2 {\r\n        let me = this.elem;\r\n        let a = me[0], b = me[1], c = me[2], d = me[3],\r\n            det = a * d - b * c;\r\n        if (det === 0) {\r\n            console.warn(\"Matrix determinant is 0\");\r\n            return new Mat2(0, 0, 0, 0);\r\n        }\r\n        let detInv = 1 / det;\r\n        return new Mat2(\r\n            d * detInv,\r\n            -b * detInv,\r\n            -c * detInv,\r\n            a * detInv\r\n        );\r\n    }\r\n    invs(): Mat2 {\r\n        let me = this.elem;\r\n        let a = me[0], b = me[1], c = me[2], d = me[3],\r\n            det = a * d - b * c;\r\n        if (det === 0) {\r\n            var msg = \"Matrix determinant is 0\";\r\n            console.warn(msg);\r\n            me.fill(0);\r\n            return this;\r\n        }\r\n        let detInv = 1 / det;\r\n        me[0] = d * detInv;\r\n        me[1] = -b * detInv;\r\n        me[2] = -c * detInv;\r\n        me[3] = a * detInv;\r\n        return this;\r\n    }\r\n    pushPool(pool: Mat2Pool = mat2Pool) {\r\n        pool.push(this);\r\n    }\r\n}\r\nexport let _mat2 = new Mat2();\r\n"],"names":[],"mappings":";;;AAGM,MAAO,QAAS,SAAQ,IAAU,CAAA;AACpC,IAAA,eAAe,KAAK,OAAO,IAAI,IAAI,CAAC,EAAE;AACzC,CAAA;AACY,MAAA,QAAQ,GAAG,IAAI,SAAS;MACxB,IAAI,CAAA;AACb,IAAA,IAAI,CAAW;AACf,IAAA,OAAO,EAAE,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACjC,IAAA,OAAO,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACnC,IAAA,OAAO,IAAI,CAAC,CAAS,EAAE,CAAS,EAAA;QAC5B,OAAO,IAAI,IAAI,CACX,CAAC,EAAE,CAAC,EACJ,CAAC,EAAE,CAAC,CACP,CAAC;KACL;IACD,WACI,CAAA,CAAA,GAAY,CAAC,EAAE,CAAY,GAAA,CAAC,EAC5B,CAAA,GAAY,CAAC,EAAE,CAAY,GAAA,CAAC,EAC5B,EAAA,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE;IAC/B,GAAG,CACC,CAAY,GAAA,CAAC,EAAE,CAAA,GAAY,CAAC,EAC5B,CAAY,GAAA,CAAC,EAAE,CAAA,GAAY,CAAC,EAAA,EACtB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,EAAE;IAChG,KAAK,GAAA,EAAK,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,EAAE;IAChG,EAAE,GAAA;QACE,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAAC,QAAA,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAAC,QAAA,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AACxE,QAAA,OAAO,IAAI,CAAC;KACf;IACD,CAAC,GAAA;AACG,QAAA,OAAO,IAAI,IAAI,CACX,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAC1B,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAC7B,CAAC;KACL;AACD,IAAA,IAAI,CAAC,EAAQ,EAAA;QACT,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,YAAA,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAC7B,SAAA;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AACD,IAAA,GAAG,CAAC,EAAQ,EAAA;AACR,QAAA,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC;QACnB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,YAAA,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACzC,SAAA;AACD,QAAA,OAAO,CAAC,CAAC;KACZ;AACD,IAAA,IAAI,CAAC,EAAQ,EAAA;QACT,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,YAAA,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAC9B,SAAA;AACD,QAAA,OAAO,IAAI,CAAC;KACf;IACD,GAAG,GAAA;AACC,QAAA,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC;QACnB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,YAAA,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAC7B,SAAA;AACD,QAAA,OAAO,CAAC,CAAC;KACZ;IACD,IAAI,GAAA;QACA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,YAAA,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAChC,SAAA;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AACD,IAAA,GAAG,CAAC,EAAQ,EAAA;AACR,QAAA,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC;QACnB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,YAAA,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACzC,SAAA;AACD,QAAA,OAAO,CAAC,CAAC;KACZ;AACD,IAAA,IAAI,CAAC,EAAQ,EAAA;QACT,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,YAAA,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AAC9B,SAAA;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AACD,IAAA,IAAI,CAAC,CAAS,EAAA;AACV,QAAA,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC;QACnB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,YAAA,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AAChC,SAAA;AACD,QAAA,OAAO,CAAC,CAAC;KACZ;AACD,IAAA,KAAK,CAAC,CAAS,EAAA;QACX,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;AACxB,YAAA,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AACrB,SAAA;AACD,QAAA,OAAO,IAAI,CAAC;KACf;AACD,IAAA,IAAI,CAAC,CAAO,EAAA;AACR,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;AAClB,QAAA,OAAO,IAAI,IAAI,CACX,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EACvB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAC1B,CAAC;KACL;AACD,IAAA,GAAG,CAAC,CAAO,EAAA;AACP,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;AAAC,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AAClC,QAAA,OAAO,IAAI,IAAI,CACX,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACvD,CAAC;KACL;AACD,IAAA,IAAI,CAAC,CAAO,EAAA;AACR,QAAA,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC;AAAC,QAAA,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;AAClC,QAAA,IAAI,CAAC,GAAG,CACJ,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EACpD,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACvD,CAAC;AACF,QAAA,OAAO,IAAI,CAAC;KACf;IACD,GAAG,GAAA;AACC,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC;AACnB,QAAA,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,EAC1C,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACxB,IAAI,GAAG,KAAK,CAAC,EAAE;AACX,YAAA,OAAO,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;YACxC,OAAO,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AAC/B,SAAA;AACD,QAAA,IAAI,MAAM,GAAG,CAAC,GAAG,GAAG,CAAC;QACrB,OAAO,IAAI,IAAI,CACX,CAAC,GAAG,MAAM,EACV,CAAC,CAAC,GAAG,MAAM,EACX,CAAC,CAAC,GAAG,MAAM,EACX,CAAC,GAAG,MAAM,CACb,CAAC;KACL;IACD,IAAI,GAAA;AACA,QAAA,IAAI,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC;AACnB,QAAA,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,EAC1C,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACxB,IAAI,GAAG,KAAK,CAAC,EAAE;YACX,IAAI,GAAG,GAAG,yBAAyB,CAAC;AACpC,YAAA,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAClB,YAAA,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;AACX,YAAA,OAAO,IAAI,CAAC;AACf,SAAA;AACD,QAAA,IAAI,MAAM,GAAG,CAAC,GAAG,GAAG,CAAC;AACrB,QAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC;QACnB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;QACpB,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC;AACpB,QAAA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC;AACnB,QAAA,OAAO,IAAI,CAAC;KACf;IACD,QAAQ,CAAC,OAAiB,QAAQ,EAAA;AAC9B,QAAA,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;KACnB;;AAEM,IAAA,KAAK,GAAG,IAAI,IAAI;;;;"}