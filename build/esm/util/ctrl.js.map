{"version":3,"file":"ctrl.js","sources":["../../../src/util/ctrl.ts"],"sourcesContent":["import { Obj4 } from \"../math/algebra/affine\";\r\nimport { Bivec } from \"../math/algebra/bivec\";\r\nimport { Mat4 } from \"../math/algebra/mat4\";\r\nimport { Quaternion } from \"../math/algebra/quaternion\";\r\nimport { Rotor } from \"../math/algebra/rotor\";\r\nimport { Vec2, vec2Pool } from \"../math/algebra/vec2\";\r\nimport { Vec3 } from \"../math/algebra/vec3\";\r\nimport { Vec4 } from \"../math/algebra/vec4\";\r\nimport { _360, _90, _DEG2RAD, _SQRT_3 } from \"../math/const\";\r\nimport { EyeStereo, SectionConfig, DisplayConfig, RetinaSliceFacing, SliceRenderer, RetinaRenderPass, RetinaRenderPassDescriptor } from \"../render/slice/slice\";\r\n\r\nexport interface IController {\r\n    update(state: ControllerState): void;\r\n}\r\nexport interface ControllerConfig {\r\n    preventDefault?: boolean;\r\n    enablePointerLock?: boolean;\r\n}\r\ninterface KeyConfig {\r\n    [fn: string]: string;\r\n}\r\nexport interface ControllerState {\r\n    currentKeys: Map<String, KeyState>;\r\n    /** holded mouse button */\r\n    currentBtn: number;\r\n    /** pressed mouse button */\r\n    mouseDown: number;\r\n    /** released mouse button */\r\n    mouseUp: number;\r\n    updateCount: number;\r\n    moveX: number;\r\n    moveY: number;\r\n    mouseX: number;\r\n    mouseY: number;\r\n    wheelX: number;\r\n    wheelY: number;\r\n    lastUpdateTime?: number;\r\n    mspf: number;\r\n    requestPointerLock: () => void;\r\n    enablePointerLock?: boolean;\r\n    /** PointerLock has been triggered by the mouse */\r\n    isPointerLockedMouseDown?: boolean;\r\n    /** PointerLock has been canceled by key escape */\r\n    isPointerLockEscaped?: boolean;\r\n    /** code:\r\n     *  'KeyA' for holding Key A\r\n     *  '.KeyA' for pressing Key A \r\n     *  'ControlLeft+.KeyA' for press A while holding CtrlLeft*/\r\n    isKeyHold: (code: string) => boolean;\r\n    isPointerLocked: () => boolean;\r\n    exitPointerLock: () => void;\r\n}\r\nexport enum KeyState {\r\n    NONE,\r\n    UP,\r\n    HOLD,\r\n    DOWN,\r\n}\r\nexport class ControllerRegistry {\r\n    dom: HTMLElement;\r\n    private ctrls: Array<IController>;\r\n    enablePointerLock: boolean;\r\n    readonly states: ControllerState = {\r\n        currentKeys: new Map(),\r\n        isPointerLockedMouseDown: false,\r\n        isPointerLockEscaped: false,\r\n        currentBtn: -1,\r\n        mouseDown: -1,\r\n        mouseUp: -1,\r\n        updateCount: 0,\r\n        moveX: 0,\r\n        moveY: 0,\r\n        mouseX: 0,\r\n        mouseY: 0,\r\n        wheelX: 0,\r\n        wheelY: 0,\r\n        mspf: -1,\r\n\r\n        isKeyHold: (_) => false,\r\n        requestPointerLock: () => false,\r\n        isPointerLocked: () => false,\r\n        exitPointerLock: () => { }\r\n    }\r\n    /** if this is true, prevent default will not work  */\r\n    disableDefaultEvent = false;\r\n    private prevIsPointerLocked = false;\r\n    private evMouseDown: (ev: MouseEvent) => any;\r\n    private evMouseUp: (ev: MouseEvent) => any;\r\n    private evMouseMove: (ev: MouseEvent) => any;\r\n    private evWheel: (ev: WheelEvent) => any;\r\n    private evKeyUp: (ev: KeyboardEvent) => any;\r\n    private evKeyDown: (ev: KeyboardEvent) => any;\r\n    private evContextMenu: (ev: MouseEvent) => any;\r\n    constructor(dom: HTMLElement, ctrls: Array<IController>, config?: ControllerConfig) {\r\n        this.dom = dom;\r\n        dom.tabIndex = 1;\r\n        this.ctrls = ctrls;\r\n        this.enablePointerLock = config?.enablePointerLock ?? false;\r\n        this.states.isKeyHold = (code) => {\r\n            if (code.includes(\"|\")) {\r\n                for (let key of code.split(\"|\")) {\r\n                    if (this.states.isKeyHold(key)) return true;\r\n                }\r\n                return false;\r\n            }\r\n            for (let key of code.split(\"+\")) {\r\n                if (key[0] === '.') {\r\n                    let state = this.states.currentKeys.get(key.slice(1));\r\n                    if (state !== KeyState.DOWN) return false;\r\n                } else {\r\n                    let state = this.states.currentKeys.get(key);\r\n                    if (!state || state === KeyState.UP) return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        this.states.isPointerLocked = () => {\r\n            return ((!this.states.isPointerLockedMouseDown) && document.pointerLockElement === this.dom);\r\n        }\r\n        this.states.exitPointerLock = () => {\r\n            if (document.pointerLockElement === this.dom) {\r\n                document.exitPointerLock();\r\n                // if we exit positively, then don't trigger isPointerLockEscaped in the next update\r\n                this.prevIsPointerLocked = false;\r\n            }\r\n        }\r\n        this.states.requestPointerLock = () => {\r\n            if (document.pointerLockElement !== dom) {\r\n                dom.requestPointerLock();\r\n            }\r\n        }\r\n\r\n        // regist events\r\n\r\n        this.evMouseDown = (ev) => {\r\n            if (this.enablePointerLock && document.pointerLockElement !== dom) {\r\n                dom.requestPointerLock();\r\n                this.states.isPointerLockedMouseDown = true;\r\n            } else {\r\n                dom.focus();\r\n            }\r\n            this.states.currentBtn = ev.button;\r\n            this.states.moveX = 0;\r\n            this.states.moveY = 0;\r\n            this.states.mouseDown = ev.button;\r\n            if (ev.altKey === false) {\r\n                this.states.currentKeys.set(\"AltLeft\", KeyState.NONE);\r\n                this.states.currentKeys.set(\"AltRight\", KeyState.NONE);\r\n            }\r\n            // left click should not be prevented, otherwise keydown event can't obtain focus\r\n            if (ev.button === 1 && config?.preventDefault === true) {\r\n                ev.preventDefault();\r\n                ev.stopPropagation();\r\n            }\r\n        };\r\n        this.evMouseMove = (ev) => {\r\n            this.states.moveX += ev.movementX;\r\n            this.states.moveY += ev.movementY;\r\n            this.states.mouseX = ev.offsetX;\r\n            this.states.mouseY = ev.offsetY;\r\n        };\r\n        this.evMouseUp = (ev) => {\r\n            this.states.currentBtn = -1;\r\n            this.states.mouseUp = ev.button;\r\n        };\r\n        this.evKeyDown = (ev) => {\r\n            let prevState = this.states.currentKeys.get(ev.code);\r\n            this.states.currentKeys.set(ev.code, prevState === KeyState.HOLD ? KeyState.HOLD : KeyState.DOWN);\r\n            if (ev.altKey === false) {\r\n                this.states.currentKeys.set(\"AltLeft\", KeyState.NONE);\r\n                this.states.currentKeys.set(\"AltRight\", KeyState.NONE);\r\n            }\r\n            if (ev.altKey === true || ev.ctrlKey === true || this.disableDefaultEvent) {\r\n                ev.preventDefault();\r\n                ev.stopPropagation();\r\n            }\r\n        };\r\n        this.evKeyUp = (ev) => {\r\n            this.states.currentKeys.set(ev.code, KeyState.UP);\r\n            if (ev.altKey === true || ev.ctrlKey === true || this.disableDefaultEvent) {\r\n                ev.preventDefault();\r\n                ev.stopPropagation();\r\n            }\r\n        };\r\n        this.evWheel = (ev) => {\r\n            this.states.wheelX = ev.deltaX;\r\n            this.states.wheelY = ev.deltaY;\r\n        };\r\n        // mouse events are restricted in dom (canvas)\r\n        dom.addEventListener(\"mousedown\", this.evMouseDown);\r\n        dom.addEventListener(\"mousemove\", this.evMouseMove);\r\n        dom.addEventListener(\"mouseup\", this.evMouseUp);\r\n        // but wheel and key event do not require focus on dom(canvas)\r\n        document.body.addEventListener(\"keydown\", this.evKeyDown);\r\n        document.body.addEventListener(\"keyup\", this.evKeyUp);\r\n        document.body.addEventListener(\"wheel\", this.evWheel);\r\n        if (config?.preventDefault === true) {\r\n            this.evContextMenu = (ev) => {\r\n                if (!this.disableDefaultEvent) {\r\n                    ev.preventDefault();\r\n                    ev.stopPropagation();\r\n                }\r\n            };\r\n            dom.addEventListener(\"contextmenu\", this.evContextMenu);\r\n        }\r\n    }\r\n    add(ctrl: IController) {\r\n        this.ctrls.push(ctrl);\r\n    }\r\n\r\n    remove(ctrl: IController) {\r\n        this.ctrls = this.ctrls.filter(c => c !== ctrl);\r\n    }\r\n    unregist() {\r\n        this.dom.removeEventListener(\"mousedown\", this.evMouseDown);\r\n        this.dom.removeEventListener(\"mousemove\", this.evMouseMove);\r\n        this.dom.removeEventListener(\"mouseup\", this.evMouseUp);\r\n        this.dom.removeEventListener(\"keydown\", this.evKeyDown);\r\n        this.dom.removeEventListener(\"keyup\", this.evKeyUp);\r\n        this.dom.removeEventListener(\"wheel\", this.evWheel);\r\n        if (this.evContextMenu) this.dom.removeEventListener(\"contextmenu\", this.evContextMenu);\r\n    }\r\n    update() {\r\n        this.states.enablePointerLock = this.enablePointerLock;\r\n        this.states.isPointerLockEscaped = this.prevIsPointerLocked && !this.states.isPointerLocked();\r\n        if (!this.states.lastUpdateTime) {\r\n            this.states.mspf = 16.667;\r\n            let now = new Date().getTime();\r\n            this.states.lastUpdateTime = now;\r\n        } else {\r\n            let now = new Date().getTime();\r\n            this.states.mspf = now - this.states.lastUpdateTime;\r\n            this.states.lastUpdateTime = now;\r\n        }\r\n        for (let c of this.ctrls) {\r\n            c.update(this.states);\r\n        }\r\n        this.states.mouseDown = -1;\r\n        this.states.mouseUp = -1;\r\n        this.states.moveX = 0;\r\n        this.states.moveY = 0;\r\n        this.states.wheelX = 0;\r\n        this.states.wheelY = 0;\r\n        this.states.updateCount++;\r\n        this.states.isPointerLockedMouseDown = false;\r\n        this.prevIsPointerLocked = this.states.isPointerLocked();\r\n        for (let [key, prevState] of this.states.currentKeys) {\r\n            let newState = prevState;\r\n            if (prevState === KeyState.DOWN) {\r\n                newState = KeyState.HOLD;\r\n            } else if (prevState === KeyState.UP) {\r\n                newState = KeyState.NONE;\r\n            }\r\n            this.states.currentKeys.set(key, newState);\r\n        }\r\n    }\r\n}\r\nexport class TrackBallController implements IController {\r\n    enabled = true;\r\n    object = new Obj4(Vec4.w.neg());\r\n    mouseSpeed = 0.01;\r\n    wheelSpeed = 0.0001;\r\n    damp = 0.1;\r\n    mouseButton3D = 0;\r\n    mouseButtonRoll = 1;\r\n    mouseButton4D = 2;\r\n    /** how many update cycles (2^n) to normalise rotor to avoid accuracy problem */\r\n    normalisePeriodBit: 4;\r\n    keyConfig = {\r\n        disable: \"AltLeft\",\r\n        enable: \"\",\r\n    }\r\n    cameraMode = false;\r\n    private _bivec = new Bivec();\r\n    private normalisePeriodMask = 15;\r\n    constructor(object?: Obj4, cameraMode?: boolean) {\r\n        if (object) this.object = object;\r\n        this.cameraMode = cameraMode ?? false;\r\n    }\r\n    update(state: ControllerState) {\r\n        let disabled = state.isKeyHold(this.keyConfig.disable) || !this.enabled;\r\n        let dampFactor = Math.exp(-this.damp * Math.min(200.0, state.mspf));\r\n        if (!disabled) {\r\n            let dx = state.moveX * this.mouseSpeed;\r\n            let dy = -state.moveY * this.mouseSpeed;\r\n            let wy = state.wheelY * this.wheelSpeed;\r\n            switch (state.currentBtn) {\r\n                case this.mouseButton3D:\r\n                    this._bivec.set(0, dx, 0, dy);\r\n                    break;\r\n                case this.mouseButtonRoll:\r\n                    this._bivec.set(dx, 0, 0, 0, 0, dy);\r\n                    break;\r\n                case this.mouseButton4D:\r\n                    this._bivec.set(0, 0, dx, 0, dy);\r\n                    break;\r\n                default:\r\n                    this._bivec.mulfs(dampFactor);\r\n            }\r\n            this.object.position.mulfs(1 + wy);\r\n        } else {\r\n            this._bivec.mulfs(dampFactor);\r\n        }\r\n        const rotor = this._bivec.exp();\r\n        if (this.cameraMode) {\r\n            rotor.mulsrconj(this.object.rotation).mulsl(this.object.rotation);\r\n            this.object.rotates(rotor);\r\n            this.object.position.rotates(rotor);\r\n        } else {\r\n            this.object.rotates(rotor);\r\n        }\r\n        if ((state.updateCount & this.normalisePeriodMask) === 0) {\r\n            this.object.rotation.norms();\r\n        }\r\n    }\r\n    lookAtCenter() {\r\n        // todo\r\n    }\r\n}\r\nexport class FreeFlyController implements IController {\r\n    enabled = true;\r\n    swapMouseYWithScrollY = false;\r\n    object = new Obj4();\r\n    mouseSpeed = 0.01;\r\n    wheelSpeed = 0.0005;\r\n    keyMoveSpeed = 0.001;\r\n    keyRotateSpeed = 0.001;\r\n    damp = 0.01;\r\n    constructor(object?: Obj4) {\r\n        if (object) this.object = object;\r\n    }\r\n    keyConfig = {\r\n        front: \"KeyW\",\r\n        back: \"KeyS\",\r\n        left: \"KeyA\",\r\n        right: \"KeyD\",\r\n        ana: \"KeyQ\",\r\n        kata: \"KeyE\",\r\n        up: \"Space\",\r\n        down: \"ShiftLeft\",\r\n        turnLeft: \"KeyJ\",\r\n        turnRight: \"KeyL\",\r\n        turnAna: \"KeyU\",\r\n        turnKata: \"KeyO\",\r\n        turnUp: \"KeyI\",\r\n        turnDown: \"KeyK\",\r\n        spinCW: \"KeyF|KeyZ\",\r\n        spinCCW: \"KeyH|KeyX\",\r\n        rollCW: \"KeyR\",\r\n        rollCCW: \"KeyY\",\r\n        pitchCW: \"KeyG\",\r\n        pitchCCW: \"KeyT\",\r\n        disable: \"AltLeft\",\r\n        enable: \"\",\r\n    }\r\n    /** how many update cycles (2^n) to normalise rotor to avoid accuracy problem */\r\n    normalisePeriodBit: 4;\r\n    private _bivec = new Bivec();\r\n    private _bivecKey = new Bivec();\r\n    private _moveVec = new Vec4();\r\n    private _vec = new Vec4();\r\n    private normalisePeriodMask = 15;\r\n\r\n    update(state: ControllerState) {\r\n        let on = state.isKeyHold;\r\n        let key = this.keyConfig;\r\n        let delta: number;\r\n        let dampFactor = Math.exp(-this.damp * Math.min(200.0, state.mspf));\r\n        let disabled = state.isKeyHold(this.keyConfig.disable) || !this.enabled;\r\n        if (!disabled) {\r\n\r\n            let keyRotateSpeed = this.keyRotateSpeed * state.mspf;\r\n            delta = (on(key.pitchCW) ? -1 : 0) + (on(key.pitchCCW) ? 1 : 0);\r\n            if (delta) this._bivecKey.yz = delta * keyRotateSpeed;\r\n            delta = (on(key.spinCW) ? -1 : 0) + (on(key.spinCCW) ? 1 : 0);\r\n            if (delta) this._bivecKey.xz = delta * keyRotateSpeed;\r\n            delta = (on(key.rollCW) ? -1 : 0) + (on(key.rollCCW) ? 1 : 0);\r\n            if (delta) this._bivecKey.xy = delta * keyRotateSpeed;\r\n            delta = (on(key.turnLeft) ? -1 : 0) + (on(key.turnRight) ? 1 : 0);\r\n            if (delta) this._bivecKey.xw = delta * keyRotateSpeed;\r\n            delta = (on(key.turnUp) ? 1 : 0) + (on(key.turnDown) ? -1 : 0);\r\n            if (delta) this._bivecKey.yw = delta * keyRotateSpeed;\r\n            delta = (on(key.turnAna) ? -1 : 0) + (on(key.turnKata) ? 1 : 0);\r\n            if (delta) this._bivecKey.zw = delta * keyRotateSpeed;\r\n        }\r\n        this._bivec.copy(this._bivecKey);\r\n        this._bivecKey.mulfs(dampFactor);\r\n        if (!disabled) {\r\n            if ((state.enablePointerLock && state.isPointerLocked()) || (state.currentBtn = 0 && !state.enablePointerLock)) {\r\n                let dx = state.moveX * this.mouseSpeed;\r\n                let dy = -state.moveY * this.mouseSpeed;\r\n                this._bivec.xw += dx;\r\n                if (this.swapMouseYWithScrollY) {\r\n                    this._bivec.yw += dy;\r\n                } else {\r\n                    this._bivec.zw -= dy;\r\n                }\r\n            }\r\n            if ((state.enablePointerLock && state.isPointerLocked()) || (!state.enablePointerLock)) {\r\n                let wx = state.wheelX * this.wheelSpeed;\r\n                let wy = state.wheelY * this.wheelSpeed;\r\n                this._bivec.xy += wx;\r\n                if (this.swapMouseYWithScrollY) {\r\n                    this._bivec.zw += wy;\r\n                } else {\r\n                    this._bivec.yw -= wy;\r\n                }\r\n            }\r\n            let keyMoveSpeed = this.keyMoveSpeed * state.mspf;\r\n            delta = (on(key.left) ? -1 : 0) + (on(key.right) ? 1 : 0);\r\n            if (delta) this._moveVec.x = delta * keyMoveSpeed;\r\n            delta = (on(key.up) ? 1 : 0) + (on(key.down) ? -1 : 0);\r\n            if (delta) this._moveVec.y = delta * keyMoveSpeed;\r\n            delta = (on(key.ana) ? -1 : 0) + (on(key.kata) ? 1 : 0);\r\n            if (delta) this._moveVec.z = delta * keyMoveSpeed;\r\n            delta = (on(key.front) ? -1 : 0) + (on(key.back) ? 1 : 0);\r\n            if (delta) this._moveVec.w = delta * keyMoveSpeed;\r\n        }\r\n        // R A = R A R-1 R \r\n        this.object.rotation.mulsr(this._bivec.exp());\r\n        this.object.translates(this._vec.copy(this._moveVec).rotates(this.object.rotation));\r\n        this._moveVec.mulfs(dampFactor);\r\n        if ((state.updateCount & this.normalisePeriodMask) === 0) {\r\n            this.object.rotation.norms();\r\n        }\r\n    }\r\n}\r\nexport class KeepUpController implements IController {\r\n    enabled = true;\r\n    object = new Obj4();\r\n    mouseSpeed = 0.01;\r\n    wheelSpeed = 0.0001;\r\n    keyMoveSpeed = 0.001;\r\n    keyRotateSpeed = 0.001;\r\n    damp = 0.05;\r\n    keyConfig = {\r\n        front: \"KeyW\",\r\n        back: \"KeyS\",\r\n        left: \"KeyA\",\r\n        right: \"KeyD\",\r\n        ana: \"KeyQ\",\r\n        kata: \"KeyE\",\r\n        up: \"Space\",\r\n        down: \"ShiftLeft\",\r\n        turnLeft: \"KeyJ\",\r\n        turnRight: \"KeyL\",\r\n        turnAna: \"KeyU\",\r\n        turnKata: \"KeyO\",\r\n        turnUp: \"KeyI\",\r\n        turnDown: \"KeyK\",\r\n        spinCW: \"KeyZ\",\r\n        spinCCW: \"KeyX\",\r\n        disable: \"AltLeft\",\r\n        enable: \"\"\r\n    }\r\n    /** how many update cycles (2^n) to normalise rotor to avoid accuracy problem */\r\n    normalisePeriodBit: 4;\r\n    private _bivec = new Bivec();\r\n    private _bivec2 = new Bivec();\r\n    private _bivecKey = new Bivec();\r\n    private _moveVec = new Vec4();\r\n    private _vec = new Vec4();\r\n    private normalisePeriodMask = 15;\r\n    private horizontalRotor = new Rotor();\r\n    private verticalRotor = new Rotor();\r\n\r\n    constructor(object?: Obj4) {\r\n        if (object) this.object = object;\r\n        this.updateObj();\r\n    }\r\n    updateObj() {\r\n        // rotate obj's yw plane to world's y axis\r\n        this.object.rotates(Rotor.lookAtvb(Vec4.y, Bivec.yw.rotate(this.object.rotation)).conjs());\r\n        // now check angle between obj's y axis and world's y axis\r\n        let objY = Vec4.y.rotate(this.object.rotation);\r\n        let r = Rotor.lookAt(objY, Vec4.y);\r\n        this.horizontalRotor.copy(r.mul(this.object.rotation));\r\n        this.verticalRotor.copy(this.horizontalRotor.mul(r.conjs()).mulsrconj(this.horizontalRotor));\r\n    }\r\n    update(state: ControllerState) {\r\n        let on = state.isKeyHold;\r\n        let key = this.keyConfig;\r\n        let delta: number;\r\n        let dampFactor = Math.exp(-this.damp * Math.min(200.0, state.mspf));\r\n        let disabled = state.isKeyHold(this.keyConfig.disable);\r\n        if (!this.enabled) return;\r\n        if (!disabled) {\r\n\r\n            let keyRotateSpeed = this.keyRotateSpeed * state.mspf;\r\n            delta = (on(key.spinCW) ? -1 : 0) + (on(key.spinCCW) ? 1 : 0);\r\n            if (delta) this._bivecKey.xz = delta * keyRotateSpeed;\r\n            delta = (on(key.turnLeft) ? -1 : 0) + (on(key.turnRight) ? 1 : 0);\r\n            if (delta) this._bivecKey.xw = delta * keyRotateSpeed;\r\n            delta = (on(key.turnUp) ? 1 : 0) + (on(key.turnDown) ? -1 : 0);\r\n            if (delta) this._bivecKey.yw = delta * keyRotateSpeed;\r\n            delta = (on(key.turnAna) ? -1 : 0) + (on(key.turnKata) ? 1 : 0);\r\n            if (delta) this._bivecKey.zw = delta * keyRotateSpeed;\r\n        }\r\n        this._bivec.xw = this._bivecKey.xw;\r\n        this._bivec.zw = this._bivecKey.zw;\r\n        if (!disabled) {\r\n            if ((state.enablePointerLock && state.isPointerLocked()) || (state.currentBtn === 0 && !state.enablePointerLock)) {\r\n                let dx = state.moveX * this.mouseSpeed;\r\n                let dy = state.moveY * this.mouseSpeed;\r\n                this._bivec.xw += dx;\r\n                this._bivec.zw += dy;\r\n            }\r\n            if ((state.enablePointerLock && state.isPointerLocked()) || (!state.enablePointerLock)) {\r\n                let wy = -state.wheelY * this.wheelSpeed;\r\n                this._bivecKey.yw += wy;\r\n            }\r\n        }\r\n        this._bivec.xz = this._bivecKey.xz;\r\n        this._bivec2.yw = this._bivecKey.yw;\r\n        // R A = R A R-1 R \r\n        this.horizontalRotor.mulsr(this._bivec.exp());\r\n        this.verticalRotor.mulsr(this._bivec2.exp());\r\n        if (!disabled) {\r\n            let keyMoveSpeed = this.keyMoveSpeed * state.mspf;\r\n            delta = (on(key.left) ? -1 : 0) + (on(key.right) ? 1 : 0);\r\n            if (delta) this._moveVec.x = delta * keyMoveSpeed;\r\n            delta = (on(key.up) ? 1 : 0) + (on(key.down) ? -1 : 0);\r\n            if (delta) this._moveVec.y = delta * keyMoveSpeed;\r\n            delta = (on(key.ana) ? -1 : 0) + (on(key.kata) ? 1 : 0);\r\n            if (delta) this._moveVec.z = delta * keyMoveSpeed;\r\n            delta = (on(key.front) ? -1 : 0) + (on(key.back) ? 1 : 0);\r\n            if (delta) this._moveVec.w = delta * keyMoveSpeed;\r\n        }\r\n        this.object.translates(this._vec.copy(this._moveVec).rotates(this.horizontalRotor));\r\n        this.object.rotation.copy(this.horizontalRotor.mul(this.verticalRotor));\r\n        this._moveVec.mulfs(dampFactor);\r\n        this._bivecKey.mulfs(dampFactor);\r\n        if ((state.updateCount & this.normalisePeriodMask) === 0) {\r\n            this.horizontalRotor.norms();\r\n            this.verticalRotor.norms();\r\n        }\r\n    }\r\n}\r\nexport class VoxelViewerController implements IController {\r\n    enabled = true;\r\n    object = new Obj4(Vec4.w.neg());\r\n    mouseSpeed = 0.01;\r\n    wheelSpeed = 0.0001;\r\n    damp = 0.1;\r\n    mousePan = 2;\r\n    mousePanZ = 1;\r\n    mouseRotate = 0;\r\n    /** how many update cycles (2^n) to normalise rotor to avoid accuracy problem */\r\n    normalisePeriodBit: 4;\r\n    keyConfig = {\r\n        disable: \"AltLeft\",\r\n        enable: \"\",\r\n    }\r\n    private _bivec = new Bivec();\r\n    private _vec = new Vec4();\r\n    private _wy = 0;\r\n    private normalisePeriodMask = 15;\r\n    constructor(object?: Obj4) {\r\n        if (object) this.object = object;\r\n    }\r\n    update(state: ControllerState) {\r\n        let disabled = state.isKeyHold(this.keyConfig.disable) || !this.enabled;\r\n        let dampFactor = Math.exp(-this.damp * Math.min(200.0, state.mspf));\r\n        if (!disabled) {\r\n            let dx = state.moveX * this.mouseSpeed;\r\n            let dy = -state.moveY * this.mouseSpeed;\r\n            let wy = state.wheelY * this.wheelSpeed;\r\n            switch (state.currentBtn) {\r\n                case this.mousePan:\r\n                    this._vec.set(dx * this.object.scale!.x, dy * this.object.scale!.y).rotates(this.object.rotation)\r\n                    this._bivec.set();\r\n                    break;\r\n                case this.mousePanZ:\r\n                    this._vec.set(dx * this.object.scale!.x, 0, -dy * this.object.scale!.z).rotates(this.object.rotation);\r\n                    this._bivec.set();\r\n                    break;\r\n                case this.mouseRotate:\r\n                    this._bivec.set(0, dx, 0, dy);\r\n                    this._vec.set();\r\n                    break;\r\n                default:\r\n                    this._bivec.mulfs(dampFactor);\r\n                    this._vec.mulfs(dampFactor);\r\n            }\r\n            this.object.position.subs(this._vec);\r\n            this._wy = wy ? wy : this._wy * dampFactor;\r\n            if (this.object.scale) this.object.scale.mulfs(1 + this._wy);\r\n        } else {\r\n            this._bivec.mulfs(dampFactor);\r\n            this._vec.mulfs(dampFactor);\r\n            this._wy *= dampFactor;\r\n        }\r\n        this.object.rotation.mulsr(this._bivec.exp());\r\n        if ((state.updateCount & this.normalisePeriodMask) === 0) {\r\n            this.object.rotation.norms();\r\n        }\r\n    }\r\n}\r\ninterface SectionPreset {\r\n    retina: boolean,\r\n    eye1: SectionConfig[],\r\n    eye2: SectionConfig[]\r\n}\r\nexport namespace sliceconfig {\r\n\r\n    export function singlezslice1eye(screenSize: { width: number, height: number }): SectionConfig[] {\r\n        let aspect = screenSize.height / screenSize.width;\r\n        let resolution = screenSize.height;\r\n        return [{\r\n            slicePos: 0,\r\n            facing: RetinaSliceFacing.POSZ,\r\n            viewport: { x: 0, y: 0, width: 1 / aspect, height: 1.0 },\r\n            resolution\r\n        }];\r\n\r\n    }\r\n    export function singlezslice2eye(screenSize: { width: number, height: number }): SectionConfig[] {\r\n        let aspect = screenSize.height / screenSize.width;\r\n        let resolution = screenSize.height * 0.8;\r\n        return [{\r\n            slicePos: 0,\r\n            facing: RetinaSliceFacing.POSZ,\r\n            eyeStereo: EyeStereo.LeftEye,\r\n            viewport: { x: -0.5, y: 0, width: 0.5 / aspect, height: 0.8 },\r\n            resolution\r\n        }, {\r\n            slicePos: 0,\r\n            facing: RetinaSliceFacing.POSZ,\r\n            eyeStereo: EyeStereo.RightEye,\r\n            viewport: { x: 0.5, y: 0, width: 0.5 / aspect, height: 0.8 },\r\n            resolution\r\n        }];\r\n    }\r\n    export function singleyslice1eye(screenSize: { width: number, height: number }): SectionConfig[] {\r\n        let aspect = screenSize.height / screenSize.width;\r\n        let resolution = screenSize.height;\r\n        return [{\r\n            slicePos: 0,\r\n            facing: RetinaSliceFacing.NEGY,\r\n            viewport: { x: 0, y: 0, width: 1 / aspect, height: 1.0 },\r\n            resolution\r\n        }];\r\n    }\r\n    export function singleyslice2eye(screenSize: { width: number, height: number }): SectionConfig[] {\r\n        let aspect = screenSize.height / screenSize.width;\r\n        let resolution = screenSize.height * 0.8;\r\n        return [{\r\n            slicePos: 0,\r\n            facing: RetinaSliceFacing.NEGY,\r\n            eyeStereo: EyeStereo.LeftEye,\r\n            viewport: { x: -0.5, y: 0, width: 0.5 / aspect, height: 0.8 },\r\n            resolution\r\n        }, {\r\n            slicePos: 0,\r\n            facing: RetinaSliceFacing.NEGY,\r\n            eyeStereo: EyeStereo.RightEye,\r\n            viewport: { x: 0.5, y: 0, width: 0.5 / aspect, height: 0.8 },\r\n            resolution\r\n        }];\r\n    }\r\n    export function zslices1eye(\r\n        step: number, maxpos: number, screenSize: { width: number, height: number }\r\n    ): SectionConfig[] {\r\n        let aspect = screenSize.height / screenSize.width;\r\n        let arr = [[0, 0]];\r\n        let j = 1;\r\n        for (let i = step; i <= maxpos; i += step, j++) {\r\n            arr.push([i, j]);\r\n            arr.push([-i, -j]);\r\n        }\r\n        let half = 2 / arr.length;\r\n        let size = 1 / (aspect * arr.length);\r\n        let resolution = screenSize.height * size;\r\n        return arr.map(pos => ({\r\n            slicePos: pos[0],\r\n            facing: RetinaSliceFacing.POSZ,\r\n            viewport: { x: pos[1] * half, y: size - 1, width: size, height: size },\r\n            resolution\r\n        }));\r\n    }\r\n    export function zslices2eye(\r\n        step: number, maxpos: number, screenSize: { width: number, height: number }\r\n    ): SectionConfig[] {\r\n        let aspect = screenSize.height / screenSize.width;\r\n        let arr = [[0, 0]];\r\n        let j = 1;\r\n        for (let i = step; i <= maxpos; i += step, j++) {\r\n            arr.push([i, j]);\r\n            arr.push([-i, -j]);\r\n        }\r\n        arr.sort((a, b) => a[0] - b[0]);\r\n        let half = 1 / arr.length;\r\n        let size = 0.5 / (aspect * arr.length);\r\n        let resolution = screenSize.height * size;\r\n        return arr.map(pos => ({\r\n            slicePos: pos[0],\r\n            facing: RetinaSliceFacing.POSZ,\r\n            eyeStereo: EyeStereo.LeftEye,\r\n            viewport: { x: (pos[1] * half) - 0.5, y: size - 1, width: size, height: size },\r\n            resolution\r\n        })).concat(\r\n            arr.map(pos => ({\r\n                slicePos: pos[0],\r\n                facing: RetinaSliceFacing.POSZ,\r\n                eyeStereo: EyeStereo.RightEye,\r\n                viewport: { x: (pos[1] * half) + 0.5, y: size - 1, width: size, height: size },\r\n                resolution\r\n            }))\r\n        );\r\n    }\r\n\r\n    export function yslices1eye(\r\n        step: number, maxpos: number, screenSize: { width: number, height: number }\r\n    ): SectionConfig[] {\r\n        let aspect = screenSize.height / screenSize.width;\r\n        let arr = [[0, 0]];\r\n        let j = 1;\r\n        for (let i = step; i <= maxpos; i += step, j++) {\r\n            arr.push([i, j]);\r\n            arr.push([-i, -j]);\r\n        }\r\n        let half = 2 / arr.length;\r\n        let size = 1 / (aspect * arr.length);\r\n        let resolution = screenSize.height * size;\r\n        return arr.map(pos => ({\r\n            slicePos: pos[0],\r\n            facing: RetinaSliceFacing.NEGY,\r\n            viewport: { x: pos[1] * half, y: size - 1, width: size, height: size },\r\n            resolution\r\n        }));\r\n    }\r\n    export function yslices2eye(\r\n        step: number, maxpos: number, screenSize: { width: number, height: number }\r\n    ): SectionConfig[] {\r\n        let aspect = screenSize.height / screenSize.width;\r\n        let arr = [[0, 0]];\r\n        let j = 1;\r\n        for (let i = step; i <= maxpos; i += step, j++) {\r\n            arr.push([i, j]);\r\n            arr.push([-i, -j]);\r\n        }\r\n        arr.sort((a, b) => a[0] - b[0]);\r\n        let half = 1 / arr.length;\r\n        let size = 0.5 / (aspect * arr.length);\r\n        let resolution = screenSize.height * size;\r\n        return arr.map(pos => ({\r\n            slicePos: pos[0],\r\n            facing: RetinaSliceFacing.NEGY,\r\n            eyeStereo: EyeStereo.LeftEye,\r\n            viewport: { x: (pos[1] * half) - 0.5, y: size - 1, width: size, height: size },\r\n            resolution\r\n        })).concat(\r\n            arr.map(pos => ({\r\n                slicePos: pos[0],\r\n                facing: RetinaSliceFacing.NEGY,\r\n                eyeStereo: EyeStereo.RightEye,\r\n                viewport: { x: (pos[1] * half) + 0.5, y: size - 1, width: size, height: size },\r\n                resolution\r\n            }))\r\n        );\r\n    }\r\n    export function default2eye(\r\n        size: number, screenSize: { width: number, height: number }\r\n    ): SectionConfig[] {\r\n        let aspect = screenSize.height / screenSize.width;\r\n        let resolution = screenSize.height * size;\r\n        let wsize: number;\r\n        let size_aspect: number;\r\n        if (size >= 0.5) {\r\n            wsize = 0.25 / aspect;\r\n            size_aspect = 0.25;\r\n            size = 0.5;\r\n        } else {\r\n            size_aspect = size * aspect;\r\n            wsize = size;\r\n        }\r\n        return [\r\n            {\r\n                facing: RetinaSliceFacing.NEGX,\r\n                eyeStereo: EyeStereo.LeftEye,\r\n                viewport: { x: -size_aspect, y: size - 1, width: wsize, height: size },\r\n                resolution\r\n            },\r\n            {\r\n                facing: RetinaSliceFacing.NEGX,\r\n                eyeStereo: EyeStereo.RightEye,\r\n                viewport: { x: 1 - size_aspect, y: size - 1, width: wsize, height: size },\r\n                resolution\r\n            },\r\n            {\r\n                facing: RetinaSliceFacing.NEGY,\r\n                eyeStereo: EyeStereo.LeftEye,\r\n                viewport: { x: -size_aspect, y: 1 - size, width: wsize, height: size },\r\n                resolution\r\n            },\r\n            {\r\n                facing: RetinaSliceFacing.NEGY,\r\n                eyeStereo: EyeStereo.RightEye,\r\n                viewport: { x: 1 - size_aspect, y: 1 - size, width: wsize, height: size },\r\n                resolution\r\n            },\r\n            {\r\n                facing: RetinaSliceFacing.POSZ,\r\n                eyeStereo: EyeStereo.LeftEye,\r\n                viewport: { x: size_aspect - 1, y: size - 1, width: wsize, height: size },\r\n                resolution\r\n            },\r\n            {\r\n                facing: RetinaSliceFacing.POSZ,\r\n                eyeStereo: EyeStereo.RightEye,\r\n                viewport: { x: size_aspect, y: size - 1, width: wsize, height: size },\r\n                resolution\r\n            },\r\n        ];\r\n    };\r\n    export function default1eye(size: number, screenSize: { width: number, height: number }): SectionConfig[] {\r\n        let aspect = screenSize.height / screenSize.width;\r\n        let resolution = screenSize.height * size;\r\n        let wsize: number;\r\n        let size_aspect: number;\r\n        if (size >= 0.5) {\r\n            wsize = 0.5 / aspect;\r\n            size_aspect = 0.5;\r\n            size = 0.5;\r\n        } else {\r\n            size_aspect = size * aspect;\r\n            wsize = size;\r\n        }\r\n        return [\r\n            {\r\n                facing: RetinaSliceFacing.NEGX,\r\n                viewport: { x: 1 - size_aspect, y: size - 1, width: wsize, height: size },\r\n                resolution\r\n            },\r\n            {\r\n                facing: RetinaSliceFacing.NEGY,\r\n                viewport: { x: 1 - size_aspect, y: 1 - size, width: wsize, height: size },\r\n                resolution\r\n            },\r\n            {\r\n                facing: RetinaSliceFacing.POSZ,\r\n                viewport: { x: size_aspect - 1, y: size - 1, width: wsize, height: size },\r\n                resolution\r\n            }\r\n        ];\r\n    }\r\n\r\n}\r\nconst retinaRenderPassDescriptors: RetinaRenderPassDescriptor[] = [\r\n    {},\r\n    {\r\n        alphaShader: {\r\n            code: `@group(1) @binding(0) var<uniform> alphaParams : vec4<f32>;\r\n            fn main(color:vec4<f32>, coord: vec3<f32>)->f32{\r\n                return color.a * (1.0 - smoothstep(alphaParams.x,alphaParams.y,dot(coord,coord))) * alphaParams.z;\r\n            }`, entryPoint: 'main'\r\n        }\r\n    }, {\r\n        alphaShader: {\r\n            code: `@group(1) @binding(0) var<uniform> alphaParams : vec4<f32>;\r\n            fn main(color:vec4<f32>, coord  : vec3<f32>)->f32{\r\n                return color.a * max(step(abs(coord.x),alphaParams.x)*step(abs(coord.y),alphaParams.x)*step(abs(coord.z),alphaParams.x)* alphaParams.y,alphaParams.z);\r\n            }`, entryPoint: 'main'\r\n        }\r\n    }, {\r\n        alphaShader: {\r\n            code: `@group(1) @binding(0) var<uniform> alphaParams : vec4<f32>;\r\n            fn main(color:vec4<f32>, coord: vec3<f32>)->f32{ \r\n                return color.a * max(step(dot(coord,alphaParams.xyz),0.0),alphaParams.w); \r\n            }`, entryPoint: 'main'\r\n        }\r\n    },\r\n];\r\nexport class RetinaController implements IController {\r\n    enabled = true;\r\n    renderer: SliceRenderer;\r\n    mouseSpeed = 0.01;\r\n    wheelSpeed = 0.0005;\r\n    keyMoveSpeed = 0.1;\r\n    keyRotateSpeed = 0.002;\r\n    opacityKeySpeed = 0.01;\r\n    fovKeySpeed = 1;\r\n    damp = 0.02;\r\n    mouseButton = 0;\r\n    retinaAlphaMouseButton = 2;\r\n    retinaEyeOffset = 0.1;\r\n    sectionEyeOffset = 0.2;\r\n    maxSectionEyeOffset = 1;\r\n    minSectionEyeOffset = 0.01;\r\n    size: GPUExtent3DStrict;\r\n    sectionPresets: (screenSize: GPUExtent3DStrict) => { [label: string]: SectionPreset };\r\n    private currentSectionConfig: string = \"retina+sections\";\r\n    private rembemerLastLayers: number;\r\n    private needResize: boolean = true;\r\n    private currentRetinaRenderPassIndex = -1;\r\n    keyConfig = {\r\n        enable: \"AltLeft\",\r\n        disable: \"\",\r\n        addOpacity: \"KeyQ\",\r\n        subOpacity: \"KeyA\",\r\n        addLayer: \"KeyW\",\r\n        subLayer: \"KeyS\",\r\n        addRetinaResolution: \".KeyE\",\r\n        subRetinaResolution: \".KeyD\",\r\n        addFov: \"KeyT\",\r\n        subFov: \"KeyG\",\r\n        toggle3D: \".KeyZ\",\r\n        addEyes3dGap: \"KeyB\",\r\n        subEyes3dGap: \"KeyV\",\r\n        addEyes4dGap: \"KeyM\",\r\n        subEyes4dGap: \"KeyN\",\r\n        negEyesGap: \".KeyX\",\r\n        toggleCrosshair: \".KeyC\",\r\n        rotateLeft: \"ArrowLeft\",\r\n        rotateRight: \"ArrowRight\",\r\n        rotateUp: \"ArrowUp\",\r\n        rotateDown: \"ArrowDown\",\r\n        refaceFront: \".KeyR\",\r\n        refaceRight: \".KeyL\",\r\n        refaceLeft: \".KeyJ\",\r\n        refaceTop: \".KeyI\",\r\n        refaceBottom: \".KeyK\",\r\n        toggleRetinaAlpha: \".KeyF\",\r\n        sectionConfigs: {\r\n            \"retina+sections\": \".Digit1\",\r\n            \"retina+bigsections\": \".Digit2\",\r\n            \"retina\": \".Digit3\",\r\n            \"sections\": \".Digit4\",\r\n            \"zsection\": \".Digit5\",\r\n            \"ysection\": \".Digit6\",\r\n            \"retina+zslices\": \".Digit7\",\r\n            \"retina+yslices\": \".Digit8\",\r\n        },\r\n    }\r\n    private alphaBuffer: GPUBuffer;\r\n    guiMouseOperation = \"\";\r\n    constructor(r: SliceRenderer) {\r\n        this.renderer = r;\r\n        const gui = new RetinaCtrlGui(this);\r\n        this.gui = gui;\r\n        document.body.appendChild(gui.dom);\r\n        this.defaultRetinaRenderPass = r.getCurrentRetinaRenderPass();\r\n        this.alphaBuffer = r.gpu.createBuffer(GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST, 16, \"RetinaController's Retina Alpha Uniform Buffer\");\r\n        this.retinaRenderPasses = retinaRenderPassDescriptors.map((desc, index) => {\r\n            if (desc?.alphaShader?.code && desc.alphaShader.code.indexOf(\"@group(1)\") !== -1) desc.alphaShaderBindingResources = [{ buffer: this.alphaBuffer }];\r\n            // this jsBuffer uses first 4 elements to write to GPU, other elems are used for js state storage\r\n            const jsBuffer = new Float32Array(8);\r\n            switch (index) {\r\n                case 1:\r\n                    jsBuffer[4] = 1;\r\n                    jsBuffer[5] = 1;\r\n                    const r2 = jsBuffer[4] * jsBuffer[4];\r\n                    jsBuffer[0] = r2 / jsBuffer[5];\r\n                    jsBuffer[1] = r2 * jsBuffer[5];\r\n                    jsBuffer[2] = 4 / (1 + r2);\r\n                    break;\r\n                case 2:\r\n                    jsBuffer[0] = 0.5;\r\n                    jsBuffer[5] = 0;\r\n                    jsBuffer[1] = 2 - jsBuffer[0];\r\n                    jsBuffer[2] = jsBuffer[5];\r\n                    break;\r\n                case 3:\r\n                    jsBuffer[2] = 1;\r\n                    jsBuffer[3] = 0.01;\r\n            }\r\n            return { promise: r.createRetinaRenderPass(desc).init(), jsBuffer };\r\n        });\r\n        this.sectionPresets = (screenSize: { width: number; height: number; }) => ({\r\n            \"retina+sections\": {\r\n                eye1: sliceconfig.default1eye(0.3, screenSize),\r\n                eye2: sliceconfig.default2eye(0.2, screenSize),\r\n                retina: true\r\n            },\r\n            \"retina+bigsections\": {\r\n                eye1: sliceconfig.default1eye(0.44, screenSize),\r\n                eye2: sliceconfig.default2eye(0.33, screenSize),\r\n                retina: true\r\n            },\r\n            \"retina\": {\r\n                eye1: [],\r\n                eye2: [],\r\n                retina: true\r\n            },\r\n            \"sections\": {\r\n                eye1: sliceconfig.default1eye(0.5, screenSize),\r\n                eye2: sliceconfig.default2eye(0.5, screenSize),\r\n                retina: false\r\n            },\r\n            \"retina+zslices\": {\r\n                eye1: sliceconfig.zslices1eye(0.15, 0.6, screenSize),\r\n                eye2: sliceconfig.zslices2eye(0.3, 0.6, screenSize),\r\n                retina: true\r\n            },\r\n            \"retina+yslices\": {\r\n                eye1: sliceconfig.yslices1eye(0.15, 0.6, screenSize),\r\n                eye2: sliceconfig.yslices2eye(0.3, 0.6, screenSize),\r\n                retina: true\r\n            },\r\n            \"zsection\": {\r\n                eye1: sliceconfig.singlezslice1eye(screenSize),\r\n                eye2: sliceconfig.singlezslice2eye(screenSize),\r\n                retina: false\r\n            },\r\n            \"ysection\": {\r\n                eye1: sliceconfig.singleyslice1eye(screenSize),\r\n                eye2: sliceconfig.singleyslice2eye(screenSize),\r\n                retina: false\r\n            },\r\n        });\r\n    }\r\n    private _vec2damp = new Vec2();\r\n    private _vec2euler = new Vec2();\r\n    private _vec3 = new Vec3();\r\n    private _q1 = new Quaternion();\r\n    private _q2 = new Quaternion();\r\n    private _mat4 = new Mat4();\r\n    private refacingFront: boolean = false;\r\n    private refacingTarget = new Vec2;\r\n    private needsUpdateRetinaCamera: boolean = false;\r\n    private retinaFov: number = 40;\r\n    private retinaSize = 1.8;\r\n    private retinaZDistance = 5;\r\n    private crossHairSize = 0.03;\r\n    /** Store displayconfig temporal changes between frames */\r\n    private tempDisplayConfig: DisplayConfig = {};\r\n    private displayConfigChanged = false;\r\n    maxRetinaResolution = 1024;\r\n    private retinaRenderPasses: { promise: Promise<RetinaRenderPass>, jsBuffer: Float32Array }[];\r\n    private defaultRetinaRenderPass: RetinaRenderPass;\r\n    private gui: RetinaCtrlGui;\r\n\r\n    toggleRetinaAlpha(idx: number) {\r\n        const { promise, jsBuffer } = this.retinaRenderPasses[idx];\r\n        if (promise) {\r\n            promise.then(pass => {\r\n                this.renderer.gpu.device.queue.writeBuffer(this.alphaBuffer, 0, jsBuffer, 0, 4);\r\n                this.renderer.setRetinaRenderPass(pass);\r\n                this.gui?.refresh({ \"toggleRetinaAlpha\": idx });\r\n                this.currentRetinaRenderPassIndex = idx;\r\n            });\r\n        } else {\r\n            this.renderer.setRetinaRenderPass(this.defaultRetinaRenderPass);\r\n            this.gui?.refresh({ \"toggleRetinaAlpha\": idx });\r\n            this.currentRetinaRenderPassIndex = -1;\r\n        }\r\n    }\r\n    getSubLayersNumber(updateCount?: number) {\r\n        // when < 32, we slow down layer speed\r\n        let layers = this.renderer.getDisplayConfig('retinaLayers');\r\n        if (layers > 32 || ((updateCount & 3) && (layers > 16 || (updateCount & 7)))) {\r\n            if (layers > 0) layers--;\r\n        }\r\n        return layers;\r\n    }\r\n    getAddLayersNumber(updateCount?: number) {\r\n        let layers = this.renderer.getDisplayConfig('retinaLayers');\r\n        if (updateCount === undefined) return Math.min(512, layers + 1);\r\n        if (layers > 32 || ((updateCount & 3) && (layers > 16 || (updateCount & 7)))) {\r\n            layers++;\r\n        }\r\n        return Math.min(512, layers);\r\n    }\r\n    update(state: ControllerState): void {\r\n        let enabled = !this.keyConfig.enable || state.isKeyHold(this.keyConfig.enable);\r\n        const on = (k: string) => state.isKeyHold(k) && enabled;\r\n        let key = this.keyConfig;\r\n        let delta: number;\r\n\r\n        // retreive all temporal changes before this frame\r\n        let displayConfig: DisplayConfig = this.tempDisplayConfig;\r\n        if (this.displayConfigChanged) this.tempDisplayConfig = {};\r\n        this.displayConfigChanged = false;\r\n\r\n        let stereo = this.renderer.getStereoMode();\r\n        if (on(this.keyConfig.toggle3D)) {\r\n            this.writeConfigToggleStereoMode(displayConfig, !stereo);\r\n            this.gui?.refresh({ \"toggleStereo\": !stereo });\r\n        } else if (this.needResize) {\r\n            displayConfig.sections = this.sectionPresets(this.renderer.getDisplayConfig(\"canvasSize\"))[this.currentSectionConfig][(\r\n                stereo ? \"eye2\" : \"eye1\"\r\n            )];\r\n        }\r\n        this.needResize = false;\r\n        if (stereo) {\r\n            if (on(this.keyConfig.addEyes3dGap)) {\r\n                this.retinaEyeOffset *= 1.05;\r\n                if (this.retinaEyeOffset > 0.4) this.retinaEyeOffset = 0.4;\r\n                if (this.retinaEyeOffset < -0.4) this.retinaEyeOffset = -0.4;\r\n                displayConfig.retinaStereoEyeOffset = this.retinaEyeOffset;\r\n                displayConfig.sectionStereoEyeOffset = this.sectionEyeOffset;\r\n            }\r\n            if (on(this.keyConfig.subEyes3dGap)) {\r\n                this.retinaEyeOffset /= 1.05;\r\n                if (this.retinaEyeOffset > 0 && this.retinaEyeOffset < 0.03) this.retinaEyeOffset = 0.03;\r\n                if (this.retinaEyeOffset < 0 && this.retinaEyeOffset > -0.03) this.retinaEyeOffset = -0.03;\r\n                displayConfig.retinaStereoEyeOffset = this.retinaEyeOffset;\r\n                displayConfig.sectionStereoEyeOffset = this.sectionEyeOffset;\r\n            }\r\n            if (on(this.keyConfig.addEyes4dGap)) {\r\n                this.sectionEyeOffset *= 1.05;\r\n                if (this.sectionEyeOffset > this.maxSectionEyeOffset) this.sectionEyeOffset = this.maxSectionEyeOffset;\r\n                if (this.sectionEyeOffset < -this.maxSectionEyeOffset) this.sectionEyeOffset = -this.maxSectionEyeOffset;\r\n                displayConfig.retinaStereoEyeOffset = this.retinaEyeOffset;\r\n                displayConfig.sectionStereoEyeOffset = this.sectionEyeOffset;\r\n            }\r\n            if (on(this.keyConfig.subEyes4dGap)) {\r\n                this.sectionEyeOffset /= 1.05;\r\n                if (this.sectionEyeOffset > 0 && this.sectionEyeOffset < this.minSectionEyeOffset) this.sectionEyeOffset = this.minSectionEyeOffset;\r\n                if (this.sectionEyeOffset < 0 && this.sectionEyeOffset > -this.minSectionEyeOffset) this.sectionEyeOffset = -this.minSectionEyeOffset;\r\n                displayConfig.retinaStereoEyeOffset = this.retinaEyeOffset;\r\n                displayConfig.sectionStereoEyeOffset = this.sectionEyeOffset;\r\n            }\r\n            if (this.guiMouseOperation === \"negEyesGap\" || on(this.keyConfig.negEyesGap)) {\r\n                this.sectionEyeOffset = -this.sectionEyeOffset;\r\n                this.retinaEyeOffset = -this.retinaEyeOffset;\r\n                displayConfig.retinaStereoEyeOffset = this.retinaEyeOffset;\r\n                displayConfig.sectionStereoEyeOffset = this.sectionEyeOffset;\r\n                this.gui?.refresh({ \"negEyesGap\": this.retinaEyeOffset > 0 || this.sectionEyeOffset > 0 });\r\n            }\r\n        }\r\n        if (on(this.keyConfig.toggleCrosshair)) {\r\n            this.writeConfigToggleCrosshair(displayConfig);\r\n        }\r\n        if (this.guiMouseOperation === \"opacitypBtn\" || on(this.keyConfig.addOpacity)) {\r\n            displayConfig.opacity = this.renderer.getDisplayConfig(\"opacity\") * (1 + this.opacityKeySpeed);\r\n        }\r\n        if (this.guiMouseOperation === \"opacitymBtn\" || on(this.keyConfig.subOpacity)) {\r\n            displayConfig.opacity = this.renderer.getDisplayConfig(\"opacity\") / (1 + this.opacityKeySpeed);\r\n        }\r\n        if (this.guiMouseOperation === \"layerpBtn\" || on(this.keyConfig.addLayer)) {\r\n            displayConfig.retinaLayers = this.getAddLayersNumber(state.updateCount);\r\n        }\r\n        if (this.guiMouseOperation === \"layermBtn\" || on(this.keyConfig.subLayer)) {\r\n            displayConfig.retinaLayers = this.getSubLayersNumber(state.updateCount);\r\n        }\r\n        if (this.guiMouseOperation === \"respBtn\" || on(this.keyConfig.addRetinaResolution)) {\r\n            this.guiMouseOperation = \"\";\r\n            let res = this.renderer.getDisplayConfig('retinaResolution');\r\n            res += this.renderer.getMinResolutionMultiple();\r\n            if (res <= this.maxRetinaResolution) displayConfig.retinaResolution = res;\r\n        }\r\n        if (this.guiMouseOperation === \"resmBtn\" || on(this.keyConfig.subRetinaResolution)) {\r\n            this.guiMouseOperation = \"\";\r\n            let res = this.renderer.getDisplayConfig('retinaResolution');\r\n            res -= this.renderer.getMinResolutionMultiple();\r\n            if (res > 0) displayConfig.retinaResolution = res;\r\n        }\r\n        if (this.guiMouseOperation === \"fovpBtn\" || on(this.keyConfig.addFov)) {\r\n            this.retinaFov += this.fovKeySpeed;\r\n            if (this.retinaFov > 120) this.retinaFov = 120;\r\n            this.needsUpdateRetinaCamera = true;\r\n        }\r\n        if (this.guiMouseOperation === \"fovmBtn\" || on(this.keyConfig.subFov)) {\r\n            this.retinaFov -= this.fovKeySpeed;\r\n            if (this.retinaFov < 0.1) this.retinaFov = 0;\r\n            this.needsUpdateRetinaCamera = true;\r\n        }\r\n        if (on(this.keyConfig.toggleRetinaAlpha)) {\r\n            this.currentRetinaRenderPassIndex++;\r\n            if (this.currentRetinaRenderPassIndex >= retinaRenderPassDescriptors.length) this.currentRetinaRenderPassIndex = 0;\r\n            this.toggleRetinaAlpha(this.currentRetinaRenderPassIndex);\r\n        }\r\n        if (enabled && state.currentBtn === this.retinaAlphaMouseButton && this.currentRetinaRenderPassIndex > 0) {\r\n            const { jsBuffer } = this.retinaRenderPasses[this.currentRetinaRenderPassIndex];\r\n            switch (this.currentRetinaRenderPassIndex) {\r\n                case 1:\r\n                    jsBuffer[4] += state.moveY * 0.01;\r\n                    jsBuffer[5] += state.moveX * 0.01;\r\n                    jsBuffer[4] = Math.max(0.01, Math.min(jsBuffer[4], _SQRT_3));\r\n                    jsBuffer[5] = Math.max(1, Math.min(jsBuffer[5], 5));\r\n                    const r2 = jsBuffer[4] * jsBuffer[4];\r\n                    jsBuffer[0] = r2 / jsBuffer[5];\r\n                    jsBuffer[1] = r2 * jsBuffer[5];\r\n                    jsBuffer[2] = 4 / (1 + r2);\r\n                    break;\r\n                case 2:\r\n                    jsBuffer[0] += state.moveY * 0.01;\r\n                    jsBuffer[5] += state.moveX * 0.01;\r\n                    jsBuffer[0] = Math.max(0.01, Math.min(jsBuffer[0], 1));\r\n                    jsBuffer[5] = Math.max(0, Math.min(jsBuffer[5], 0.1));\r\n                    jsBuffer[1] = 2 - jsBuffer[0];\r\n                    jsBuffer[2] = jsBuffer[5];\r\n                    break;\r\n                case 3:\r\n                    let n = new Vec3(jsBuffer[0], jsBuffer[1], jsBuffer[2]).norms();\r\n                    // n.rotates(new Vec3(state.moveY, state.moveX).mulfs(0.01).exp());\r\n                    let y = Math.acos(n.y) + state.moveX * 0.01;\r\n                    let x = Math.atan2(n.z, n.x) + state.moveY * 0.01;\r\n                    const sy = Math.sin(y);\r\n                    n.set(Math.cos(x) * sy, Math.cos(y), Math.sin(x) * sy);\r\n                    n.writeBuffer(jsBuffer);\r\n            }\r\n            this.renderer.gpu.device.queue.writeBuffer(this.alphaBuffer, 0, jsBuffer, 0, 4);\r\n        }\r\n        for (let [label, keyCode] of Object.entries(this.keyConfig.sectionConfigs)) {\r\n            if (on(keyCode)) {\r\n                this.toggleSectionConfig(label);\r\n            }\r\n        }\r\n        delta = (on(key.rotateDown) ? -1 : 0) + (on(key.rotateUp) ? 1 : 0);\r\n        let keyRotateSpeed = this.keyRotateSpeed * state.mspf;\r\n        if (delta) this._vec2damp.y = delta * keyRotateSpeed;\r\n        delta = (on(key.rotateLeft) ? 1 : 0) + (on(key.rotateRight) ? -1 : 0);\r\n        if (delta) this._vec2damp.x = delta * keyRotateSpeed;\r\n        if (enabled) {\r\n            if (state.currentBtn === this.mouseButton) {\r\n                this.refacingFront = false;\r\n                if (state.moveX) this._vec2damp.x = state.moveX * this.mouseSpeed;\r\n                if (state.moveY) this._vec2damp.y = state.moveY * this.mouseSpeed;\r\n            }\r\n            if (state.wheelY) {\r\n                this.needsUpdateRetinaCamera = true;\r\n                this.retinaSize += state.wheelY * this.wheelSpeed;\r\n            }\r\n        }\r\n        if (on(key.refaceFront)) {\r\n            this.refacingFront = true;\r\n            this.refacingTarget.set();\r\n        } else if (on(key.refaceRight)) {\r\n            this.refacingFront = true;\r\n            this.refacingTarget.set(_90, 0);\r\n        } else if (on(key.refaceTop)) {\r\n            this.refacingFront = true;\r\n            this.refacingTarget.set(0, -_90);\r\n        } else if (on(key.refaceLeft)) {\r\n            this.refacingFront = true;\r\n            this.refacingTarget.set(-_90, 0);\r\n        } else if (on(key.refaceBottom)) {\r\n            this.refacingFront = true;\r\n            this.refacingTarget.set(0, _90);\r\n        }\r\n\r\n        if (this._vec2damp.norm1() < 1e-3 || this.refacingFront) {\r\n            this._vec2damp.set(0, 0);\r\n        }\r\n        if (this._vec2damp.norm1() > 1e-3 || this.refacingFront || this.needsUpdateRetinaCamera) {\r\n            if (this.needsUpdateRetinaCamera) {\r\n                if (this.retinaFov > 0) {\r\n                    this.retinaZDistance = this.retinaSize / Math.tan(this.retinaFov / 2 * _DEG2RAD);\r\n                    displayConfig.camera3D = {\r\n                        fov: this.retinaFov,\r\n                        near: Math.max(0.01, this.retinaZDistance - 4),\r\n                        far: this.retinaZDistance + 4\r\n                    };\r\n                } else {\r\n                    this.retinaZDistance = 4;\r\n                    displayConfig.camera3D = {\r\n                        size: this.retinaSize,\r\n                        near: 2,\r\n                        far: 8\r\n                    };\r\n                }\r\n            }\r\n            this.needsUpdateRetinaCamera = false;\r\n            this._vec2euler.x %= _360;\r\n            this._vec2euler.y %= _360;\r\n            let dampFactor = Math.exp(-this.damp * Math.min(200.0, state.mspf));\r\n            if (this.refacingFront) {\r\n                this._vec2euler.subs(this.refacingTarget).mulfs(dampFactor);\r\n                if (this._vec2euler.norm1() < 0.01) this.refacingFront = false;\r\n                this._vec2euler.adds(this.refacingTarget);\r\n            }\r\n            this._vec2euler.adds(this._vec2damp);\r\n            let mat = this._mat4.setFrom3DRotation(this._q1.expset(this._vec3.set(0, this._vec2euler.x, 0)).mulsr(\r\n                this._q2.expset(this._vec3.set(this._vec2euler.y, 0, 0))\r\n            ).conjs());\r\n            mat.elem[11] = -this.retinaZDistance;\r\n            displayConfig.retinaViewMatrix = mat;\r\n            this._vec2damp.mulfs(dampFactor);\r\n        }\r\n        this.renderer.setDisplayConfig(displayConfig);\r\n    }\r\n    private writeConfigToggleStereoMode(dstConfig: DisplayConfig, stereo?: boolean) {\r\n        stereo ??= !this.renderer.getStereoMode();\r\n        if (!stereo) {\r\n            dstConfig.retinaStereoEyeOffset = 0;\r\n            dstConfig.sectionStereoEyeOffset = 0;\r\n        } else {\r\n            dstConfig.retinaStereoEyeOffset = this.retinaEyeOffset;\r\n            dstConfig.sectionStereoEyeOffset = this.sectionEyeOffset;\r\n        }\r\n        dstConfig.sections = this.sectionPresets(this.renderer.getDisplayConfig(\"canvasSize\"))[this.currentSectionConfig][(\r\n            stereo ? \"eye2\" : \"eye1\"\r\n        )];\r\n    }\r\n    toggleStereo(stereo?: boolean) {\r\n        this.gui?.refresh({ \"toggleStereo\": stereo || !this.renderer.getStereoMode() });\r\n        this.writeConfigToggleStereoMode(this.tempDisplayConfig, stereo);\r\n        this.displayConfigChanged = true;\r\n    }\r\n    private writeConfigToggleCrosshair(dstConfig: DisplayConfig, size?: number) {\r\n        if (!size) {\r\n            let crossHair = this.renderer.getDisplayConfig('crosshair');\r\n            dstConfig.crosshair = crossHair === 0 ? this.crossHairSize : 0;\r\n        } else {\r\n            dstConfig.crosshair = size;\r\n            this.crossHairSize = size;\r\n        }\r\n    }\r\n    toggleCrosshair() {\r\n        this.writeConfigToggleCrosshair(this.tempDisplayConfig);\r\n        this.displayConfigChanged = true;\r\n    }\r\n    setSectionEyeOffset(offset: number) {\r\n        let stereo = this.renderer.getStereoMode();\r\n        this.sectionEyeOffset = offset;\r\n        if (stereo) { this.tempDisplayConfig.sectionStereoEyeOffset = offset; this.displayConfigChanged = true; }\r\n    }\r\n    setRetinaEyeOffset(offset: number) {\r\n        let stereo = this.renderer.getStereoMode();\r\n        this.retinaEyeOffset = offset;\r\n        if (stereo) { this.tempDisplayConfig.retinaStereoEyeOffset = offset; this.displayConfigChanged = true; }\r\n    }\r\n    setLayers(layers: number) {\r\n        this.tempDisplayConfig.retinaLayers = layers;\r\n        this.displayConfigChanged = true;\r\n    }\r\n    setOpacity(opacity: number) {\r\n        this.tempDisplayConfig.opacity = opacity;\r\n        this.displayConfigChanged = true;\r\n    }\r\n    setCrosshairSize(size: number) {\r\n        this.tempDisplayConfig.crosshair = size;\r\n        this.crossHairSize = size;\r\n        this.displayConfigChanged = true;\r\n    }\r\n    setRetinaResolution(retinaResolution: number) {\r\n        this.tempDisplayConfig.retinaResolution = retinaResolution;\r\n        this.displayConfigChanged = true;\r\n    }\r\n    setRetinaSize(size: number) {\r\n        this.retinaSize = size;\r\n        this.needsUpdateRetinaCamera = true;\r\n    }\r\n    setRetinaFov(fov: number) {\r\n        this.retinaFov = fov;\r\n        this.needsUpdateRetinaCamera = true;\r\n    }\r\n    toggleSectionConfig(index: string) {\r\n        if (this.currentSectionConfig === index) return;\r\n        let preset = this.sectionPresets(this.renderer.getDisplayConfig(\"canvasSize\"))[index];\r\n        if (!preset) console.error(`Section Configuration \"${index}\" does not exsit.`);\r\n        let layers = this.renderer.getDisplayConfig(\"retinaLayers\");\r\n        if (preset.retina === false && layers > 0) {\r\n            this.rembemerLastLayers = layers;\r\n            layers = 0;\r\n        } else if (preset.retina === true && this.rembemerLastLayers) {\r\n            layers = this.rembemerLastLayers;\r\n            this.rembemerLastLayers = null;\r\n        }\r\n        let stereo = this.renderer.getStereoMode();\r\n        let sections = preset[(\r\n            stereo ? \"eye2\" : \"eye1\"\r\n        )];\r\n        this.displayConfigChanged = true;\r\n        this.tempDisplayConfig.retinaLayers = layers;\r\n        this.tempDisplayConfig.sections = sections;\r\n        this.currentSectionConfig = index;\r\n        this.gui?.refresh({ \"toggleSectionConfig\": index });\r\n    }\r\n    setSize(size: GPUExtent3DStrict) {\r\n        this.tempDisplayConfig.canvasSize = size;\r\n        this.displayConfigChanged = true;\r\n        this.needResize = true;\r\n    }\r\n}\r\n\r\nexport class RetinaCtrlGui {\r\n    controller: RetinaController;\r\n    dom: HTMLDivElement;\r\n    iconSize = 32;\r\n    refresh: (param: any) => void;\r\n    createToggleDiv(CtrlBtn: HTMLButtonElement, display: string = \"\") {\r\n        const div = document.createElement(\"div\");\r\n        div.style.display = \"none\";\r\n        CtrlBtn.addEventListener(\"click\", () => {\r\n            div.style.display = div.style.display === \"none\" ? display : \"none\";\r\n        });\r\n        return div;\r\n    }\r\n    createDropBox(CtrlBtn: HTMLButtonElement, offset: number, width: number = 1) {\r\n        const div = this.createToggleDiv(CtrlBtn);\r\n        div.style.position = \"absolute\";\r\n        div.className = \"retina-ctrl-gui\"\r\n        div.style.width = this.iconSize * width + \"px\";\r\n        div.style.top = this.iconSize + \"px\";\r\n        div.style.left = this.iconSize * offset + \"px\";\r\n        return div;\r\n    }\r\n    toggle() {\r\n        this.dom.style.display = this.dom.style.display === \"none\" ? \"\" : \"none\";\r\n    }\r\n    constructor(retinaCtrl: RetinaController) {\r\n        this.controller = retinaCtrl;\r\n        this.dom = document.createElement(\"div\");\r\n        this.dom.style.position = \"fixed\";\r\n        this.dom.style.top = \"50vh\";\r\n        this.dom.style.right = \"0\";\r\n        document.body.appendChild(this.dom);\r\n\r\n        // write gui and set size event\r\n\r\n        const SVG_HEADER = `<svg xmlns='http://www.w3.org/2000/svg' viewBox='`;\r\n        const SVG_LINE = `style=\"fill:none;stroke:#FFF;stroke-width:0.25;\"`;\r\n        const SVG_PLUS = `<text x=\"1.5\" y=\"3.5\" stroke=\"#F00\" style=\"font-size:3px\">+</text>`;\r\n        const SVG_MINUS = `<text x=\"2\" y=\"3.5\" stroke=\"#F00\" style=\"font-size:3px\">-</text>`;\r\n        const SVG_RETINA = `<path d=\"M 1.3,3.3 2.5,4 4.1,3.6 V 2 L 2.9,1.3 1.3,1.7 Z\"/>`;\r\n        const SVG_CHECKER = `${SVG_HEADER}0 0 5 5'><g style=\"fill:#FFF\"><rect width=\"1\" height=\"1\" x=\"0.5\" y=\"0.5\"/><rect width=\"1\" height=\"1\" x=\"2.5\" y=\"0.5\"/><rect width=\"1\" height=\"1\" x=\"1.5\" y=\"1.5\"/><rect width=\"1\" height=\"1\" x=\"3.5\" y=\"1.5\"/><rect width=\"1\" height=\"1\" x=\"0.5\" y=\"2.5\"/><rect width=\"1\" height=\"1\" x=\"2.5\" y=\"2.5\"/><rect width=\"1\" height=\"1\" x=\"1.5\" y=\"3.5\"/><rect width=\"1\" height=\"1\" x=\"3.5\" y=\"3.5\"/>`;\r\n        const SVG_CAM = `${SVG_HEADER}0 0 5 5'><g ${SVG_LINE}><circle cx=\"0.77\" cy=\"1.57\" r=\"0.4\"/><rect width=\"2.36\" height=\"1.6\" x=\"0.39\" y=\"2.15\"/><circle cx=\"1.9\" cy=\"1.35\" r=\"0.66\"/><path d=\"M 2.74,2.48 4.89,1\"/><path d=\"m 2.77,3.27 2.16,1.4\"/><path d=\"m 4.46,1.9 c 0.23,0.65 0.28,1.3 0.03,1.9\"/><path d=\"M 4.24,2.4 4.36,1.7 4.9,2.18\"/><path d=\"M 4.23,3.2 4.41,3.9 5,3.4\"/>`;\r\n        const mainBtn = this.addBtn(`${SVG_HEADER}0.6 0.5 4.5 4.5'><g ${SVG_LINE}><path d=\"M 1.9,4.53 1.4,4.24 1.51,3.73 C 1.43,3.65 1.36,3.56 1.3,3.46 L 0.77,3.43 0.62,2.87 1.07,2.58 C 1.07,2.47 1.08,2.36 1.11,2.25 L 0.76,1.84 1.05,1.34 1.56,1.45 C 1.64,1.37 1.73,1.3 1.83,1.24 L 1.86,0.71 2.42,0.56 2.71,1 c 0.11,0 0.23,0.02 0.34,0.04 L 3.45,0.7 3.95,0.99 3.84,1.5 c 0.08,0.08 0.15,0.17 0.21,0.27 l 0.53,0.03 0.15,0.56 -0.44,0.3 c 0,0.11 -0.02,0.23 -0.04,0.34 L 4.59,3.37 4.3,3.88 3.79,3.77 C 3.7,3.85 3.61,3.91 3.52,3.97 L 3.48,4.5 2.92,4.65 2.63,4.21 C 2.53,4.2 2.41,4.19 2.3,4.16 Z\"/><circle cx=\"2.67\" cy=\"2.62\" r=\"1\"/></g></svg>`);\r\n        const crossppl1Btn = this.addBtn(`${SVG_HEADER}0.6 0.5 4.5 4.5'><g ${SVG_LINE}><path d=\"M 1.22,1.68 V 3.764 L 2.83,4.644 4.472,3.715 V 1.715 L 2.81,0.8 Z M 1.55,1.86 2.86,2.61 V 4.31 M 2.86,2.61 4.16,1.86\"/></g></svg>`);\r\n        const crossppl2Btn = this.addBtn(`${SVG_HEADER}0.6 0.5 4.5 4.5'><g ${SVG_LINE}><circle cx=\"2.69\" cy=\"2.6\" r=\"2\"/><path d=\"m 0.69,2.6 c 0.002,1.28 4,1.28 4,0.014\"/><path style=\"stroke-dasharray:0.2, 0.2;\" d=\"M 0.68,2.6 C 0.71,1.45 4.68,1.5 4.7,2.63\"/></g></svg>`);\r\n        const crossppl3Btn = this.addBtn(`${SVG_HEADER}0.6 0.5 4.5 4.5'><g style=\"fill:none;stroke:#FFF;stroke-width:0.4;\"><path transform=\"scale(0.6) translate(1.8,1.8)\" d=\"M 1.22,1.68 V 3.764 L 2.83,4.644 4.472,3.715 V 1.715 L 2.81,0.8 Z M 1.55,1.86 2.86,2.61 V 4.31 M 2.86,2.61 4.16,1.86\"/></g></svg>`);\r\n        const crossppl4Btn = this.addBtn(`${SVG_HEADER}0.6 0.5 4.5 4.5'><g ${SVG_LINE}><path d=\"M 1.19,3.49 2.85,4.45 4.42,3.55 V 1.57 L 2.77,0.63 1.19,1.52 Z M 2,1.12 3.45,1.05 4.4,2.62 3.65,3.94 1.98,3.92 1.23,2.74 1.95,1.1\"/></g></svg>`);\r\n        const crosshairBtn = this.addBtn(`${SVG_HEADER}0.6 0.5 4.5 4.5'><g ${SVG_LINE}><path d=\"m 2.62,1 v 3.37 M 1.56,4 3.56,1.47 M 0.9,2.7 H 4.23\"/></g></svg>`);\r\n        const stereoBtn = this.addBtn(`${SVG_HEADER}0.5 0.3 4.5 4.5'><g ${SVG_LINE}><path d=\"M 0.563,2.636 C 2.33,1 3.24,1.22 4.74,2.76 2.99,3.96 1.676,3.73 0.564,2.637 Z\"/><circle cx=\"2.6\" cy=\"2.5\" r=\"0.9\"/><circle cx=\"2.6\" cy=\"2.5\" r=\"0.54\"/></g></svg>`);\r\n        const settingBtn = this.addBtn(`${SVG_HEADER}0.5 0.3 4.5 4.5'><g id=\"g1\" ${SVG_LINE}><path d=\"M 1.3,3.4 V 4.8 M 1.77,3.4 V 4.8 M 1.3,0.4 V 2.8 M 1.77,0.4 V 2.8\"/><rect width=\"1.7\" height=\"0.4\" x=\"0.63\" y=\"3.04\"/></g><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#g1\" transform=\"rotate(180,2.65,2.59)\"/></svg>`);\r\n        const slicecfg1Btn = this.addBtn(`${SVG_HEADER}0 0 5 5'><g ${SVG_LINE}>${SVG_RETINA}<rect width=\"1.2\" height=\"1.2\" x=\"0.6\" y=\"3.6\"/><rect width=\"1.2\" height=\"1.2\" x=\"3.5\" y=\"3.6\"/><rect width=\"1.2\" height=\"1.2\" x=\"3.5\" y=\"0.5\"/></g></svg>`);\r\n        const slicecfg2Btn = this.addBtn(`${SVG_HEADER}0 0 5 5'><g ${SVG_LINE}>${SVG_RETINA}<rect width=\"1.7\" height=\"1.7\" x=\"0.6\" y=\"2.8\"/><rect width=\"1.7\" height=\"1.7\" x=\"2.9\" y=\"2.8\"/><rect width=\"1.7\" height=\"1.7\" x=\"2.9\" y=\"0.5\"/></g></svg>`);\r\n        const slicecfg3Btn = this.addBtn(`${SVG_HEADER}0 0 5 5'><g ${SVG_LINE}>${SVG_RETINA}</g></svg>`);\r\n        const slicecfg4Btn = this.addBtn(`${SVG_HEADER}0 0 5 5'><g ${SVG_LINE}><rect width=\"2\" height=\"2\" x=\"0.6\" y=\"2.5\"/><rect width=\"2\" height=\"2\" x=\"2.6\" y=\"2.5\"/><rect width=\"2\" height=\"2\" x=\"2.6\" y=\"0.5\"/></g></svg>`);\r\n        const slicecfg5Btn = this.addBtn(`${SVG_HEADER}0 0 5 5'><g ${SVG_LINE}><rect width=\"4\" height=\"4\" x=\"0.6\" y=\"0.6\"/><text x=\"1.5\" y=\"3.5\" stroke=\"#0F0\" style=\"font-size:3px\">Y</text></g></svg>`);\r\n        const slicecfg6Btn = this.addBtn(`${SVG_HEADER}0 0 5 5'><g ${SVG_LINE}><rect width=\"4\" height=\"4\" x=\"0.6\" y=\"0.6\"/><text x=\"1.5\" y=\"3.5\" stroke=\"#00F\" style=\"font-size:3px\">Z</text></g></svg>`);\r\n        const slicecfg7Btn = this.addBtn(`${SVG_HEADER}0 0 5 5'><g ${SVG_LINE}>${SVG_RETINA}<rect width=\"1\" height=\"1\" x=\"0.6\" y=\"3\"/><rect width=\"1\" height=\"1\" x=\"1.6\" y=\"3\"/><rect width=\"1\" height=\"1\" x=\"2.6\" y=\"3\"/><rect width=\"1\" height=\"1\" x=\"3.6\" y=\"3\"/><text x=\"1.5\" y=\"3.5\" stroke=\"#0F0\" style=\"font-size:3px\">Y</text></g></svg>`);\r\n        const slicecfg8Btn = this.addBtn(`${SVG_HEADER}0 0 5 5'><g ${SVG_LINE}>${SVG_RETINA}<rect width=\"1\" height=\"1\" x=\"0.6\" y=\"3\"/><rect width=\"1\" height=\"1\" x=\"1.6\" y=\"3\"/><rect width=\"1\" height=\"1\" x=\"2.6\" y=\"3\"/><rect width=\"1\" height=\"1\" x=\"3.6\" y=\"3\"/><text x=\"1.5\" y=\"3.5\" stroke=\"#00F\" style=\"font-size:3px\">Z</text></g></svg>`);\r\n        const layerpBtn = this.addBtn(`${SVG_HEADER}0 0 5 5'><g ${SVG_LINE}><rect id=\"r\" width=\"1.8\" height=\"2.3\" x=\"2.7\" y=\"2.94\" transform=\"matrix(0.95,-0.3,0,1,0,0)\"/><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#r\" id=\"u\" transform=\"translate(-0.6,-0.4)\"/><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#u\" transform=\"translate(-0.6,-0.4)\"/>${SVG_PLUS}</g></svg>`);\r\n        const layermBtn = this.addBtn(`${SVG_HEADER}0 0 5 5'><g ${SVG_LINE}><rect id=\"r\" width=\"1.8\" height=\"2.3\" x=\"2.7\" y=\"2.94\" transform=\"matrix(0.95,-0.3,0,1,0,0)\"/><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#r\" id=\"u\" transform=\"translate(-0.6,-0.4)\"/><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#u\" transform=\"translate(-0.6,-0.4)\"/>${SVG_MINUS}</g></svg>`);\r\n        const opacitypBtn = this.addBtn(`${SVG_CHECKER}<text x=\"1.5\" y=\"3.5\" style=\"font-size:3px;stroke:#F00;stroke-width:0.25\">+</text></g></svg>`);\r\n        const opacitymBtn = this.addBtn(`${SVG_CHECKER}<text x=\"2\" y=\"3.5\" style=\"font-size:3px;stroke:#F00;stroke-width:0.25\">-</text></g></svg>`);\r\n        const fovpBtn = this.addBtn(`${SVG_CAM}${SVG_PLUS}</g></svg>`);\r\n        const fovmBtn = this.addBtn(`${SVG_CAM}${SVG_MINUS}</g></svg>`);\r\n        const respBtn = this.addBtn(`${SVG_HEADER}0 0 5 5'><g ${SVG_LINE}><rect width=\"4.6\" height=\"2.93\" x=\"0.33\" y=\"0.9\"/><path d=\"M 2.44,3.844 1.62,4.78 H 3.77 L 3.03,3.84\"/><circle cx=\"1.86\" cy=\"2.4\" r=\"1.05\"/><rect width=\"1.63\" height=\"0.48\" x=\"3.38\" y=\"1.7\" transform=\"rotate(12.5)\"/><path d=\"M 1.075,1.825H 1.6 V 2.1 H 1.9 V 2.5 H 2.3 V 3.07 H 2.5\"/>${SVG_PLUS}</g></svg>`);\r\n        const resmBtn = this.addBtn(`${SVG_HEADER}0 0 5 5'><g ${SVG_LINE}><rect width=\"4.6\" height=\"2.93\" x=\"0.33\" y=\"0.9\"/><path d=\"M 2.44,3.844 1.62,4.78 H 3.77 L 3.03,3.84\"/><circle cx=\"1.86\" cy=\"2.4\" r=\"1.05\"/><rect width=\"1.63\" height=\"0.48\" x=\"3.38\" y=\"1.7\" transform=\"rotate(12.5)\"/><path d=\"M 1.075,1.825H 1.6 V 2.1 H 1.9 V 2.5 H 2.3 V 3.07 H 2.5\"/>${SVG_MINUS}</g></svg>`);\r\n        const eyeModeCrossBtn = this.addBtn(`${SVG_HEADER}0.5 0.3 4.5 4.5'><g ${SVG_LINE}><circle cx=\"2\" cy=\"4\" r=\"0.3\"/><circle cx=\"3.2\" cy=\"4\" r=\"0.3\"/><path d=\"M 2,3.4 3,1 M 3.2,3.4 2.2,1\"/></g></svg>`);\r\n        const eyeModeParaBtn = this.addBtn(`${SVG_HEADER}0.5 0.3 4.5 4.5'><g ${SVG_LINE}><circle cx=\"2\" cy=\"4\" r=\"0.3\"/><circle cx=\"3.2\" cy=\"4\" r=\"0.3\"/><path d=\"M 2,3.4 1.8,1 M 3.2,3.4 3.4,1\"/></g></svg>`);\r\n        eyeModeCrossBtn.style.position = \"absolute\";\r\n        eyeModeParaBtn.style.position = \"absolute\";\r\n        eyeModeCrossBtn.style.left = \"-32px\";\r\n        eyeModeParaBtn.style.left = \"-32px\";\r\n        const mainBar = this.createToggleDiv(mainBtn, \"inline-block\");\r\n        let drag = NaN;\r\n        let startPos: number;\r\n        let enableKeycode: string;\r\n        mainBtn.addEventListener('mousedown', (e) => {\r\n            drag = e.clientY;\r\n            startPos = Number(this.dom.style.top.replace(\"vh\", \"\")) / 100 * window.innerHeight;\r\n        });\r\n        mainBtn.addEventListener('mouseenter', () => {\r\n            if (enableKeycode != retinaCtrl.keyConfig.enable) {\r\n                this.refresh({ \"enableKeyCode\": retinaCtrl.keyConfig.enable });\r\n            }\r\n        });\r\n        mainBtn.addEventListener('mousemove', (e) => {\r\n            if (!drag) return;\r\n\r\n            const currPos = startPos + e.clientY - drag;\r\n            this.dom.style.top = currPos / window.innerHeight * 100 + \"vh\";\r\n        });\r\n        mainBtn.addEventListener('mouseup', () => { drag = NaN; });\r\n        mainBtn.addEventListener('mouseout', () => { drag = NaN; });\r\n\r\n\r\n        this.dom.appendChild(mainBar);\r\n\r\n        mainBar.appendChild(eyeModeCrossBtn);\r\n        mainBar.appendChild(eyeModeParaBtn);\r\n        eyeModeCrossBtn.addEventListener('mousedown', () => retinaCtrl.guiMouseOperation = \"negEyesGap\");\r\n        eyeModeParaBtn.addEventListener('mousedown', () => retinaCtrl.guiMouseOperation = \"negEyesGap\");\r\n\r\n        stereoBtn.addEventListener('click', () => retinaCtrl.toggleStereo());\r\n        mainBar.appendChild(stereoBtn);\r\n\r\n        const slicecfgPlaceholder = document.createElement(\"span\");\r\n        slicecfgPlaceholder.className = \"slicecfg\";\r\n        mainBar.appendChild(slicecfgPlaceholder);\r\n        let slicecfgPlaceholderBtn = slicecfg1Btn.cloneNode(true) as HTMLButtonElement;\r\n        slicecfgPlaceholder.appendChild(slicecfgPlaceholderBtn);\r\n        const slicecfgBar = this.createDropBox(slicecfgPlaceholderBtn, 0, 2);\r\n        slicecfgPlaceholder.appendChild(slicecfgBar);\r\n        slicecfgBar.appendChild(slicecfg1Btn);\r\n        slicecfgBar.appendChild(slicecfg2Btn);\r\n        slicecfgBar.appendChild(slicecfg3Btn);\r\n        slicecfgBar.appendChild(slicecfg4Btn);\r\n        slicecfgBar.appendChild(slicecfg5Btn);\r\n        slicecfgBar.appendChild(slicecfg6Btn);\r\n        slicecfgBar.appendChild(slicecfg7Btn);\r\n        slicecfgBar.appendChild(slicecfg8Btn);\r\n        const slicecfgBtnFn = function () {\r\n            slicecfgPlaceholderBtn.style.backgroundImage = this.style.backgroundImage;\r\n            retinaCtrl.toggleSectionConfig(this.name);\r\n        }\r\n        slicecfg1Btn.addEventListener('click', slicecfgBtnFn); slicecfg1Btn.name = \"retina+sections\";\r\n        slicecfg2Btn.addEventListener('click', slicecfgBtnFn); slicecfg2Btn.name = \"retina+bigsections\"\r\n        slicecfg3Btn.addEventListener('click', slicecfgBtnFn); slicecfg3Btn.name = \"retina\";\r\n        slicecfg4Btn.addEventListener('click', slicecfgBtnFn); slicecfg4Btn.name = \"sections\";\r\n        slicecfg5Btn.addEventListener('click', slicecfgBtnFn); slicecfg5Btn.name = \"zsection\";\r\n        slicecfg6Btn.addEventListener('click', slicecfgBtnFn); slicecfg6Btn.name = \"ysection\";\r\n        slicecfg7Btn.addEventListener('click', slicecfgBtnFn); slicecfg7Btn.name = \"retina+zslices\";\r\n        slicecfg8Btn.addEventListener('click', slicecfgBtnFn); slicecfg8Btn.name = \"retina+yslices\";\r\n        const settingBarPlaceHolder = document.createElement(\"span\");\r\n        settingBarPlaceHolder.appendChild(settingBtn);\r\n        const settingBar = this.createDropBox(settingBtn, 2, 2);\r\n        settingBarPlaceHolder.className = \"settingbar\";\r\n        settingBarPlaceHolder.appendChild(settingBar);\r\n        mainBar.appendChild(settingBarPlaceHolder);\r\n        settingBar.appendChild(layerpBtn);\r\n        layerpBtn.addEventListener('mousedown', () => retinaCtrl.guiMouseOperation = \"layerpBtn\");\r\n        settingBar.appendChild(layermBtn);\r\n        layermBtn.addEventListener('mousedown', () => retinaCtrl.guiMouseOperation = \"layermBtn\");\r\n        settingBar.appendChild(opacitypBtn);\r\n        opacitypBtn.addEventListener('mousedown', () => retinaCtrl.guiMouseOperation = \"opacitypBtn\");\r\n        settingBar.appendChild(opacitymBtn);\r\n        opacitymBtn.addEventListener('mousedown', () => retinaCtrl.guiMouseOperation = \"opacitymBtn\");\r\n        settingBar.appendChild(fovpBtn);\r\n        fovpBtn.addEventListener('mousedown', () => retinaCtrl.guiMouseOperation = \"fovpBtn\");\r\n        settingBar.appendChild(fovmBtn);\r\n        fovmBtn.addEventListener('mousedown', () => retinaCtrl.guiMouseOperation = \"fovmBtn\");\r\n        settingBar.appendChild(respBtn);\r\n        respBtn.addEventListener('mousedown', () => retinaCtrl.guiMouseOperation = \"respBtn\");\r\n        settingBar.appendChild(resmBtn);\r\n        resmBtn.addEventListener('mousedown', () => retinaCtrl.guiMouseOperation = \"resmBtn\");\r\n\r\n        mainBar.appendChild(crosshairBtn);\r\n        crosshairBtn.addEventListener(\"click\", () => retinaCtrl.toggleCrosshair());\r\n\r\n        const crosspplPlaceholder = document.createElement(\"span\");\r\n        mainBar.appendChild(crosspplPlaceholder);\r\n        let crosspplPlaceholderBtn = crossppl1Btn.cloneNode(true) as HTMLButtonElement;\r\n        crosspplPlaceholder.appendChild(crosspplPlaceholderBtn);\r\n        crosspplPlaceholder.className = \"crossppl\";\r\n        const crosspplBar = this.createDropBox(crosspplPlaceholderBtn, 4);\r\n        crosspplPlaceholder.appendChild(crosspplBar);\r\n\r\n        const crosspplBtnFn = function () {\r\n            crosspplPlaceholderBtn.style.backgroundImage = this.style.backgroundImage;\r\n            retinaCtrl.toggleRetinaAlpha(Number(this.name));\r\n        }\r\n        crosspplBar.appendChild(crossppl1Btn); crossppl1Btn.addEventListener('click', crosspplBtnFn); crossppl1Btn.name = \"0\";\r\n        crosspplBar.appendChild(crossppl2Btn); crossppl2Btn.addEventListener('click', crosspplBtnFn); crossppl2Btn.name = \"1\";\r\n        crosspplBar.appendChild(crossppl3Btn); crossppl3Btn.addEventListener('click', crosspplBtnFn); crossppl3Btn.name = \"2\";\r\n        crosspplBar.appendChild(crossppl4Btn); crossppl4Btn.addEventListener('click', crosspplBtnFn); crossppl4Btn.name = \"3\";\r\n\r\n        this.refresh = (param: any) => {\r\n            let crosspplBtn: HTMLButtonElement;\r\n            switch (param[\"toggleRetinaAlpha\"]) {\r\n                case 0: crosspplBtn = crossppl1Btn; break;\r\n                case 1: crosspplBtn = crossppl2Btn; break;\r\n                case 2: crosspplBtn = crossppl3Btn; break;\r\n                case 3: crosspplBtn = crossppl4Btn; break;\r\n            }\r\n            switch (param[\"toggleStereo\"]) {\r\n                case true: param[\"negEyesGap\"] = retinaCtrl.retinaEyeOffset > 0 || retinaCtrl.sectionEyeOffset > 0; break;\r\n                case false: eyeModeCrossBtn.style.display = \"none\"; eyeModeParaBtn.style.display = \"none\"; break;\r\n            }\r\n            switch (param[\"negEyesGap\"]) {\r\n                case false: eyeModeCrossBtn.style.display = \"none\"; eyeModeParaBtn.style.display = \"\"; break;\r\n                case true: eyeModeCrossBtn.style.display = \"\"; eyeModeParaBtn.style.display = \"none\"; break;\r\n            }\r\n\r\n            if (crosspplBtn) crosspplPlaceholderBtn.style.backgroundImage = crosspplBtn.style.backgroundImage;\r\n            switch (param[\"toggleSectionConfig\"]) {\r\n                case \"retina+sections\": slicecfg1Btn.click(); break;\r\n                case \"retina+bigsections\": slicecfg2Btn.click(); break;\r\n                case \"retina\": slicecfg3Btn.click(); break;\r\n                case \"sections\": slicecfg4Btn.click(); break;\r\n                case \"zsection\": slicecfg5Btn.click(); break;\r\n                case \"ysection\": slicecfg6Btn.click(); break;\r\n                case \"retina+zslices\": slicecfg7Btn.click(); break;\r\n                case \"retina+yslices\": slicecfg8Btn.click(); break;\r\n            }\r\n            if (param[\"enableKeyCode\"] !== undefined) {\r\n                enableKeycode = param[\"enableKeyCode\"];\r\n                const BtnHint = {\r\n                    \"zh\": {\r\n                        \"mouseBtn0\": \"鼠标左键\",\r\n                        \"mouseBtn1\": \"鼠标中键\",\r\n                        \"mouseBtn2\": \"鼠标右键\",\r\n                        \"left\": \"左\",\r\n                        \"right\": \"右\",\r\n                        \"digit\": \"大键盘数字\",\r\n                        \"mainBtn\": \"显示/隐藏体素渲染设置\",\r\n                        \"crosspplPlaceholderBtn\": \"显示/隐藏选择截面形状\",\r\n                        \"crossppl1Btn\": \"截面形状：默认立方体\",\r\n                        \"crossppl2Btn\": \"截面形状：球\",\r\n                        \"crossppl3Btn\": \"截面形状：小立方体\",\r\n                        \"crossppl4Btn\": \"截面形状：平面\",\r\n                        \"crossppl2BtnDesc\": \"拖动以改变球半径(垂直)\\n和羽化量(水平)\",\r\n                        \"crossppl3BtnDesc\": \"拖动以改变立方体大小(垂直)\\n和剩余部分透明度(水平)\",\r\n                        \"crossppl4BtnDesc\": \"拖动以改变截平面方向\",\r\n                        \"stereoBtn\": \"切换裸眼3D模式\",\r\n                        \"eyeModeCrossBtn\": \"交叉眼\",\r\n                        \"eyeModeParaBtn\": \"平行眼\",\r\n                        \"slicecfgPlaceholderBtn\": \"显示/隐藏选择视图配置\",\r\n                        \"slicecfg1Btn\": \"视图配置：体素+三个截面\",\r\n                        \"slicecfg2Btn\": \"视图配置：体素+三个大截面\",\r\n                        \"slicecfg3Btn\": \"视图配置：体素\",\r\n                        \"slicecfg4Btn\": \"视图配置：三个截面\",\r\n                        \"slicecfg5Btn\": \"视图配置：Y轴截面\",\r\n                        \"slicecfg6Btn\": \"视图配置：Z轴截面\",\r\n                        \"slicecfg7Btn\": \"视图配置：体素+平行Y轴截面\",\r\n                        \"slicecfg8Btn\": \"视图配置：体素+平行Z轴截面\",\r\n                        \"layerpBtn\": \"增加体素渲染层数\",\r\n                        \"layermBtn\": \"减少体素渲染层数\",\r\n                        \"opacitypBtn\": \"增加体素不透明度\",\r\n                        \"opacitymBtn\": \"减少体素不透明度\",\r\n                        \"fovpBtn\": \"增大体素显示视场角\",\r\n                        \"fovmBtn\": \"降低体素显示视场角\",\r\n                        \"respBtn\": \"增大每层体素分辨率\",\r\n                        \"resmBtn\": \"降低每层体素分辨率\",\r\n                        \"settingBtn\": \"显示/隐藏体素渲染参数调节\",\r\n                        \"crosshairBtn\": \"显示/隐藏十字准心\",\r\n                    },\r\n                    \"en\": {\r\n                        \"mouseBtn0\": \"Left Mouse Button\",\r\n                        \"mouseBtn1\": \"Middle Mouse Button\",\r\n                        \"mouseBtn2\": \"Right Mouse Button\",\r\n                        \"eyeModeCrossBtn\": \"Cross View\",\r\n                        \"eyeModeParaBtn\": \"Parallel View\",\r\n                        \"left\": \"Left\",\r\n                        \"right\": \"Right\",\r\n                        \"digit\": \"Digit \",\r\n                        \"mainBtn\": \"Show / Hide Voxel Render Settings\",\r\n                        \"crosspplPlaceholderBtn\": \"Show / Hide Choose CrossSection Shape\",\r\n                        \"crossppl1Btn\": \"CrossSection Shape: Default Cube\",\r\n                        \"crossppl2Btn\": \"CrossSection Shape: Ball\",\r\n                        \"crossppl3Btn\": \"CrossSection Shape: Small Cube\",\r\n                        \"crossppl4Btn\": \"CrossSection Shape: Plane\",\r\n                        \"crossppl2BtnDesc\": \" Drag to Change Ball Radius(Vertically)\\nand Feathering Amount(Horizontally)\",\r\n                        \"crossppl3BtnDesc\": \" Drag to Change Cube Size(Vertically)\\nand Remained Opacity(Horizontally)\",\r\n                        \"crossppl4BtnDesc\": \" Drag to Change Section Plane's Orientation\",\r\n                        \"stereoBtn\": \"Toggle Naked Eye Stereo Mode\",\r\n                        \"slicecfgPlaceholderBtn\": \"Show / Hide Choose View Configuration\",\r\n                        \"slicecfg1Btn\": \"View Configuration: Voxel + Sections\",\r\n                        \"slicecfg2Btn\": \"View Configuration: Voxel + Big Sections\",\r\n                        \"slicecfg3Btn\": \"View Configuration: Voxel Only\",\r\n                        \"slicecfg4Btn\": \"View Configuration: 3 Sections\",\r\n                        \"slicecfg5Btn\": \"View Configuration: Y axis Section\",\r\n                        \"slicecfg6Btn\": \"View Configuration: Z axis Section\",\r\n                        \"slicecfg7Btn\": \"View Configuration: Voxel + Y axis Parallel Sections\",\r\n                        \"slicecfg8Btn\": \"View Configuration: Voxel + Z axis Parallel Sections\",\r\n                        \"layerpBtn\": \"Increase Voxel Layers\",\r\n                        \"layermBtn\": \"Decrease Voxel Layers\",\r\n                        \"opacitypBtn\": \"Increase Voxel Opacity\",\r\n                        \"opacitymBtn\": \"Decrease Voxel Opacity\",\r\n                        \"fovpBtn\": \"Increase Field Of Voxel View\",\r\n                        \"fovmBtn\": \"Decrease Voxel Field Of Voxel View\",\r\n                        \"respBtn\": \"Increase Resolution Per Voxel Layer\",\r\n                        \"resmBtn\": \"Decrease Resolution Per Voxel Layer\",\r\n                        \"settingBtn\": \"Show / Hide Voxel Render Params\",\r\n                        \"crosshairBtn\": \"Toggle Crosshair\",\r\n                    },\r\n                }\r\n                let params = new URLSearchParams(window.location.search.slice(1));\r\n                let tr = BtnHint[params.get(\"lang\") ?? (navigator.languages.join(\",\").includes(\"zh\") ? \"zh\" : \"en\")];\r\n\r\n                const keyName = (cfg: string, config?: any) => `\\n(${retinaCtrl.keyConfig.enable ? retinaCtrl.keyConfig.enable.replace(\"Key\", \"\").replace(\"Left\", tr[\"left\"]).replace(\"Right\", tr[\"right\"]).replace(\"Digit\", tr[\"digit\"]) + \" + \" : \"\"\r\n                    }${(config ?? retinaCtrl.keyConfig)[cfg].replace(/(Key)|(Left)|(Right)|(\\.)/g, \"\").replace(\"Digit\", tr[\"digit\"])})`;\r\n\r\n                mainBtn.title = tr[\"mainBtn\"];\r\n                crosspplPlaceholderBtn.title = tr[\"crosspplPlaceholderBtn\"];\r\n                const getCrosspplBtnTitle = (btnName: string, noDragDesc?: boolean) => tr[btnName] + keyName(\"toggleRetinaAlpha\") + (\r\n                    !noDragDesc ? \"\\n----\" + keyName(\"\", { \"\": \"\" }).replace(/[\\(\\})]/g, \"\") + tr[\"mouseBtn\" + retinaCtrl.retinaAlphaMouseButton] + tr[btnName + \"Desc\"] : \"\"\r\n                );\r\n                crossppl1Btn.title = getCrosspplBtnTitle(\"crossppl1Btn\", true);\r\n                crossppl2Btn.title = getCrosspplBtnTitle(\"crossppl2Btn\");\r\n                crossppl3Btn.title = getCrosspplBtnTitle(\"crossppl3Btn\");\r\n                crossppl4Btn.title = getCrosspplBtnTitle(\"crossppl4Btn\");\r\n                stereoBtn.title = tr[\"stereoBtn\"] + keyName(\"toggle3D\");\r\n                eyeModeCrossBtn.title = tr[\"eyeModeCrossBtn\"] + keyName(\"negEyesGap\");\r\n                eyeModeParaBtn.title = tr[\"eyeModeParaBtn\"] + keyName(\"negEyesGap\");\r\n                slicecfgPlaceholderBtn.title = tr[\"slicecfgPlaceholderBtn\"];\r\n                slicecfg1Btn.title = tr[\"slicecfg1Btn\"] + keyName(\"retina+sections\", retinaCtrl.keyConfig.sectionConfigs);\r\n                slicecfg2Btn.title = tr[\"slicecfg2Btn\"] + keyName(\"retina+bigsections\", retinaCtrl.keyConfig.sectionConfigs);\r\n                slicecfg3Btn.title = tr[\"slicecfg3Btn\"] + keyName(\"retina\", retinaCtrl.keyConfig.sectionConfigs);\r\n                slicecfg4Btn.title = tr[\"slicecfg4Btn\"] + keyName(\"sections\", retinaCtrl.keyConfig.sectionConfigs);\r\n                slicecfg5Btn.title = tr[\"slicecfg5Btn\"] + keyName(\"zsection\", retinaCtrl.keyConfig.sectionConfigs);\r\n                slicecfg6Btn.title = tr[\"slicecfg6Btn\"] + keyName(\"ysection\", retinaCtrl.keyConfig.sectionConfigs);\r\n                slicecfg7Btn.title = tr[\"slicecfg7Btn\"] + keyName(\"retina+zslices\", retinaCtrl.keyConfig.sectionConfigs);\r\n                slicecfg8Btn.title = tr[\"slicecfg8Btn\"] + keyName(\"retina+yslices\", retinaCtrl.keyConfig.sectionConfigs);\r\n                layerpBtn.title = tr[\"layerpBtn\"] + keyName(\"addLayer\");\r\n                layermBtn.title = tr[\"layermBtn\"] + keyName(\"subLayer\");\r\n                opacitypBtn.title = tr[\"opacitypBtn\"] + keyName(\"addOpacity\");\r\n                opacitymBtn.title = tr[\"opacitymBtn\"] + keyName(\"subOpacity\");\r\n                fovpBtn.title = tr[\"fovpBtn\"] + keyName(\"addFov\");\r\n                fovmBtn.title = tr[\"fovmBtn\"] + keyName(\"subFov\");\r\n                respBtn.title = tr[\"respBtn\"] + keyName(\"addRetinaResolution\");\r\n                resmBtn.title = tr[\"resmBtn\"] + keyName(\"subRetinaResolution\");\r\n                settingBtn.title = tr[\"settingBtn\"];\r\n                crosshairBtn.title = tr[\"crosshairBtn\"] + keyName(\"toggleCrosshair\");\r\n            }\r\n        }\r\n        const css = document.createElement(\"style\");\r\n        css.appendChild(document.createTextNode(`\r\n        button.retina-ctrl-gui{\r\n            background: #999;\r\n        }\r\n        .slicecfg button.retina-ctrl-gui{\r\n            background: #B77;\r\n        }\r\n        .settingbar button.retina-ctrl-gui{\r\n            background: #7B7;\r\n        }\r\n        .crossppl button.retina-ctrl-gui{\r\n            background: #BB7;\r\n        }\r\n        button.retina-ctrl-gui[title]:hover::after{\r\n            white-space: pre-line; width: max-content;\r\n            content:attr(title);position:absolute;bottom:100%;right:0%; font-size:1em;z-index:100;background:#000;color:#FFF; padding:0;margin:0;\r\n        }\r\n        div.retina-ctrl-gui button.retina-ctrl-gui[title]:hover::after{\r\n            bottom:calc(100% + ${this.iconSize}px);\r\n        }\r\n        `));\r\n        this.dom.appendChild(mainBtn);\r\n        this.dom.appendChild(css);\r\n\r\n        this.refresh({ \"negEyesGap\": retinaCtrl.retinaEyeOffset > 0 || retinaCtrl.sectionEyeOffset > 0 });\r\n    }\r\n    addBtn(svgIcon: string) {\r\n        const btn = document.createElement(\"button\");\r\n        btn.className = \"retina-ctrl-gui\";\r\n        btn.innerHTML = \"&nbsp;\";\r\n        btn.style.width = this.iconSize + \"px\";\r\n        btn.style.height = this.iconSize + \"px\";\r\n        btn.style.borderRadius = this.iconSize * 0.25 + \"px\";\r\n        btn.style.backgroundImage = `url('data:image/svg+xml,${escape(svgIcon)}')`;\r\n        const cancelFn = () => this.controller.guiMouseOperation = \"\";\r\n        btn.addEventListener('mouseup', cancelFn); btn.addEventListener('mouseout', cancelFn);\r\n        return btn;\r\n    }\r\n}"],"names":[],"mappings":"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"}